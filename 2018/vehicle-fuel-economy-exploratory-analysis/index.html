<!DOCTYPE html>
<html lang="en-us">
  <head>
    

<div id="code-folding-buttons" class="dropdown btn-group pull-right">
  <a class="btn btn-light btn-sm dropdown-toggle" href="#" role="button" id="allCodeToggleButton"
     data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Code
  </a>
  <div class="dropdown-menu" aria-labelledby="allCodeToggleButton">
    <a id="rmd-show-all-code" class="dropdown-item small" href="#">Show all</a>
    <a id="rmd-hide-all-code" class="dropdown-item small" href="#">Hide all</a>
  </div>
</div>


    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/nitinahuja.github.io\/",
  "author": {
    "@type": "Person",
    "name": "Nitin Ahuja",
    
    "image": "https://www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d"
    
  },
  "name":"A programmer\u0027s viewpoint",
  "description":"Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.\nLet\u0026rsquo;s start by loading the libraries we need:",
  "url":"https:\/\/nitinahuja.github.io\/2018\/vehicle-fuel-economy-exploratory-analysis\/",
  "keywords":"[]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.118.2 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="Nitin Ahuja">
<meta name="keywords" content="">
<meta name="description" content="Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let&rsquo;s start by loading the libraries we need:">


<meta property="og:description" content="Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let&rsquo;s start by loading the libraries we need:">
<meta property="og:type" content="article">
<meta property="og:title" content="Vehicle Fuel Economy - exploratory analysis">
<meta name="twitter:title" content="Vehicle Fuel Economy - exploratory analysis">
<meta property="og:url" content="https://nitinahuja.github.io/2018/vehicle-fuel-economy-exploratory-analysis/">
<meta property="twitter:url" content="https://nitinahuja.github.io/2018/vehicle-fuel-economy-exploratory-analysis/">
<meta property="og:site_name" content="A programmer&#39;s viewpoint">
<meta property="og:description" content="Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let&rsquo;s start by loading the libraries we need:">
<meta name="twitter:description" content="Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let&rsquo;s start by loading the libraries we need:">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2018-11-21T00:00:00">
  
  
    <meta property="article:modified_time" content="2018-11-21T00:00:00">
  
  
  
    
      <meta property="article:section" content="Classification">
    
      <meta property="article:section" content="R">
    
  
  
    
      <meta property="article:tag" content="EDA">
    
      <meta property="article:tag" content="machine learning">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@nitinahuja">


  <meta name="twitter:creator" content="@nitinahuja">






  <meta property="og:image" content="https://www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=640">




  <meta property="og:image" content="https://nitinahuja.github.io/img/car.jpg">
  <meta property="twitter:image" content="https://nitinahuja.github.io/img/car.jpg">


  <meta property="og:image" content="https://nitinahuja.github.io/img/car_thumb.jpg">
  <meta property="twitter:image" content="https://nitinahuja.github.io/img/car_thumb.jpg">


    <title>Vehicle Fuel Economy - exploratory analysis</title>

    <link rel="icon" href="https://nitinahuja.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://nitinahuja.github.io/2018/vehicle-fuel-economy-exploratory-analysis/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://nitinahuja.github.io/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://nitinahuja.github.io/css/codefolding.css">
      
    
      
        <link rel="stylesheet"  crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
      
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-105634890-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://nitinahuja.github.io/" aria-label="Go to homepage">A programmer&#39;s viewpoint</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://nitinahuja.github.io/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
  

<div id="code-folding-buttons" class="dropdown btn-group pull-right">
  <a class="btn btn-light btn-sm dropdown-toggle" href="#" role="button" id="allCodeToggleButton"
     data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Code
  </a>
  <div class="dropdown-menu" aria-labelledby="allCodeToggleButton">
    <a id="rmd-show-all-code" class="dropdown-item small" href="#">Show all</a>
    <a id="rmd-hide-all-code" class="dropdown-item small" href="#">Hide all</a>
  </div>
</div>


</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://nitinahuja.github.io/#about" aria-label="Read more about the author">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Nitin Ahuja</h4>
        
          <h5 class="sidebar-profile-bio">A programmer&rsquo;s viewpoint</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://nitinahuja.github.io/" title="Home">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://nitinahuja.github.io/categories" title="Categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://nitinahuja.github.io/tags" title="Tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://nitinahuja.github.io/archives" title="Archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://nitinahuja.github.io/#about" title="About">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/nitinahuja" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://nitinahuja.github.io/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              "
       style="background-image:url('/img/car.jpg')"
       data-behavior="4">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      Vehicle Fuel Economy - exploratory analysis
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-11-21T00:00:00Z">
        
  November 21, 2018

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://nitinahuja.github.io/categories/classification">Classification</a>, 
    
      <a class="category-link" href="https://nitinahuja.github.io/categories/r">R</a>
    
  

  </div>

</div>
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <h1 id="introduction">Introduction</h1>
<p>In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques.
I am going to start by fetching some data from the inter webs, this data is available at the <a href="http://www.fueleconomy.gov/feg/epadata/vehicles.csv.zip">FuelEconomy.gov</a> site.
This file has fuel economy data for all cars sold in the United States for several years.</p>
<p>Let&rsquo;s start by loading the libraries we need:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">suppressPackageStartupMessages</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(tidyverse)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(ggridges)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(ggthemes)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(ggrepel)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(data.table)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(here)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(skimr)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(scales)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(gridExtra)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">library</span>(RColorBrewer)
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">here</span>()
</span></span></code></pre></div><pre tabindex="0"><code>## [1] &#34;/Users/nahuja/dev/r/site&#34;
</code></pre><p>We&rsquo;ll try to load the file directly from the site. This allows us to get the most recent data from the internet.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e">#temp &lt;- tempfile()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#download.file(&#34;http://www.fueleconomy.gov/feg/epadata/vehicles.csv.zip&#34;, temp)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#unz(temp, &#34;~/Downloads/vehicles.csv&#34;)</span>
</span></span><span style="display:flex;"><span>dt <span style="color:#f92672">&lt;-</span> data.table<span style="color:#f92672">::</span><span style="color:#a6e22e">fread</span>(<span style="color:#e6db74">&#34;~/Downloads/vehicles.csv&#34;</span>, fill <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#unlink(temp)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>vehicles <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as_tibble</span>(dt)
</span></span></code></pre></div><p>We have 46564 rows - that&rsquo;s a lot of make and models.</p>
<p>Let&rsquo;s take a look at what this data looks like using the excellent Skimr library for a succinct look.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">skim</span>(vehicles)
</span></span></code></pre></div><p>Table: <span id="tab:unnamed-chunk-3"></span>Table 1: Data summary</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">vehicles</td>
</tr>
<tr>
<td style="text-align:left">Number of rows</td>
<td style="text-align:left">46564</td>
</tr>
<tr>
<td style="text-align:left">Number of columns</td>
<td style="text-align:left">84</td>
</tr>
<tr>
<td style="text-align:left">_______________________</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Column type frequency:</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">character</td>
<td style="text-align:left">24</td>
</tr>
<tr>
<td style="text-align:left">logical</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">numeric</td>
<td style="text-align:left">59</td>
</tr>
<tr>
<td style="text-align:left">________________________</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Group variables</td>
<td style="text-align:left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">skim_variable</th>
<th style="text-align:right">n_missing</th>
<th style="text-align:right">complete_rate</th>
<th style="text-align:right">min</th>
<th style="text-align:right">max</th>
<th style="text-align:right">empty</th>
<th style="text-align:right">n_unique</th>
<th style="text-align:right">whitespace</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">drive</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">26</td>
<td style="text-align:right">1186</td>
<td style="text-align:right">8</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">eng_dscr</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">46</td>
<td style="text-align:right">17204</td>
<td style="text-align:right">600</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">fuelType</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">27</td>
<td style="text-align:right">0</td>
<td style="text-align:right">14</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">fuelType1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">6</td>
<td style="text-align:right">17</td>
<td style="text-align:right">0</td>
<td style="text-align:right">6</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">make</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">34</td>
<td style="text-align:right">0</td>
<td style="text-align:right">143</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">model</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">47</td>
<td style="text-align:right">0</td>
<td style="text-align:right">4872</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">mpgData</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">2</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">trany</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">32</td>
<td style="text-align:right">11</td>
<td style="text-align:right">41</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">VClass</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">34</td>
<td style="text-align:right">0</td>
<td style="text-align:right">34</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">baseModel</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">39</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1431</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">guzzler</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">43838</td>
<td style="text-align:right">4</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">trans_dscr</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">15</td>
<td style="text-align:right">31520</td>
<td style="text-align:right">53</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">tCharger</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">36708</td>
<td style="text-align:right">2</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">sCharger</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">45568</td>
<td style="text-align:right">2</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">atvType</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">14</td>
<td style="text-align:right">41674</td>
<td style="text-align:right">9</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">fuelType2</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">11</td>
<td style="text-align:right">44716</td>
<td style="text-align:right">5</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">rangeA</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">11</td>
<td style="text-align:right">44721</td>
<td style="text-align:right">240</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">evMotor</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">51</td>
<td style="text-align:right">44542</td>
<td style="text-align:right">327</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">mfrCode</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">30808</td>
<td style="text-align:right">56</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">c240Dscr</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">16</td>
<td style="text-align:right">46423</td>
<td style="text-align:right">6</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">c240bDscr</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">44</td>
<td style="text-align:right">46429</td>
<td style="text-align:right">8</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">createdOn</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">28</td>
<td style="text-align:right">28</td>
<td style="text-align:right">0</td>
<td style="text-align:right">444</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">modifiedOn</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">28</td>
<td style="text-align:right">28</td>
<td style="text-align:right">0</td>
<td style="text-align:right">284</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">startStop</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">31689</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">skim_variable</th>
<th style="text-align:right">n_missing</th>
<th style="text-align:right">complete_rate</th>
<th style="text-align:right">mean</th>
<th style="text-align:left">count</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">phevBlended</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0.01</td>
<td style="text-align:left">FAL: 46323, TRU: 241</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">skim_variable</th>
<th style="text-align:right">n_missing</th>
<th style="text-align:right">complete_rate</th>
<th style="text-align:right">mean</th>
<th style="text-align:right">sd</th>
<th style="text-align:right">p0</th>
<th style="text-align:right">p25</th>
<th style="text-align:right">p50</th>
<th style="text-align:right">p75</th>
<th style="text-align:right">p100</th>
<th style="text-align:left">hist</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">barrels08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">15.27</td>
<td style="text-align:right">4.39</td>
<td style="text-align:right">0.05</td>
<td style="text-align:right">12.94</td>
<td style="text-align:right">14.88</td>
<td style="text-align:right">17.50</td>
<td style="text-align:right">42.50</td>
<td style="text-align:left">▁▇▃▁▁</td>
</tr>
<tr>
<td style="text-align:left">barrelsA08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.19</td>
<td style="text-align:right">0.98</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">16.53</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">charge120</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:left">▁▁▇▁▁</td>
</tr>
<tr>
<td style="text-align:left">charge240</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.14</td>
<td style="text-align:right">1.12</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">19.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">city08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">19.33</td>
<td style="text-align:right">11.04</td>
<td style="text-align:right">6.00</td>
<td style="text-align:right">15.00</td>
<td style="text-align:right">18.00</td>
<td style="text-align:right">21.00</td>
<td style="text-align:right">153.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">city08U</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">8.39</td>
<td style="text-align:right">14.96</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">17.15</td>
<td style="text-align:right">155.82</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">cityA08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.84</td>
<td style="text-align:right">6.45</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">145.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">cityA08U</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.72</td>
<td style="text-align:right">6.37</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">145.08</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">cityCD</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.04</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">5.35</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">cityE</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.78</td>
<td style="text-align:right">5.90</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">122.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">cityUF</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.04</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.93</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">co2</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">121.68</td>
<td style="text-align:right">195.47</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">314.00</td>
<td style="text-align:right">979.00</td>
<td style="text-align:left">▇▂▂▁▁</td>
</tr>
<tr>
<td style="text-align:left">co2A</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">5.86</td>
<td style="text-align:right">57.11</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">713.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">co2TailpipeAGpm</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">16.47</td>
<td style="text-align:right">90.50</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">713.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">co2TailpipeGpm</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">455.87</td>
<td style="text-align:right">130.15</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">378.00</td>
<td style="text-align:right">444.35</td>
<td style="text-align:right">522.76</td>
<td style="text-align:right">1269.57</td>
<td style="text-align:left">▁▇▃▁▁</td>
</tr>
<tr>
<td style="text-align:left">comb08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">21.53</td>
<td style="text-align:right">10.41</td>
<td style="text-align:right">7.00</td>
<td style="text-align:right">17.00</td>
<td style="text-align:right">20.00</td>
<td style="text-align:right">24.00</td>
<td style="text-align:right">142.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">comb08U</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">9.21</td>
<td style="text-align:right">15.28</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">19.74</td>
<td style="text-align:right">142.99</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">combA08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.90</td>
<td style="text-align:right">6.42</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">133.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">combA08U</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.75</td>
<td style="text-align:right">6.30</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">133.27</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">combE</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.79</td>
<td style="text-align:right">5.96</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">121.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">combinedCD</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.03</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">4.80</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">combinedUF</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.04</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.92</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">cylinders</td>
<td style="text-align:right">603</td>
<td style="text-align:right">0.99</td>
<td style="text-align:right">5.71</td>
<td style="text-align:right">1.77</td>
<td style="text-align:right">2.00</td>
<td style="text-align:right">4.00</td>
<td style="text-align:right">6.00</td>
<td style="text-align:right">6.00</td>
<td style="text-align:right">16.00</td>
<td style="text-align:left">▇▇▅▁▁</td>
</tr>
<tr>
<td style="text-align:left">displ</td>
<td style="text-align:right">601</td>
<td style="text-align:right">0.99</td>
<td style="text-align:right">3.28</td>
<td style="text-align:right">1.36</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">2.20</td>
<td style="text-align:right">3.00</td>
<td style="text-align:right">4.20</td>
<td style="text-align:right">8.40</td>
<td style="text-align:left">▁▇▅▂▁</td>
</tr>
<tr>
<td style="text-align:left">engId</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">7248.08</td>
<td style="text-align:right">16420.98</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">168.00</td>
<td style="text-align:right">3923.00</td>
<td style="text-align:right">69102.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">feScore</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.90</td>
<td style="text-align:right">3.02</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">4.00</td>
<td style="text-align:right">10.00</td>
<td style="text-align:left">▇▁▂▁▁</td>
</tr>
<tr>
<td style="text-align:left">fuelCost08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">3163.57</td>
<td style="text-align:right">910.75</td>
<td style="text-align:right">500.00</td>
<td style="text-align:right">2600.00</td>
<td style="text-align:right">3200.00</td>
<td style="text-align:right">3700.00</td>
<td style="text-align:right">10000.00</td>
<td style="text-align:left">▂▇▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">fuelCostA08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">118.49</td>
<td style="text-align:right">644.40</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">4950.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">ghgScore</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.90</td>
<td style="text-align:right">3.03</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">3.00</td>
<td style="text-align:right">10.00</td>
<td style="text-align:left">▇▁▂▁▁</td>
</tr>
<tr>
<td style="text-align:left">ghgScoreA</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">-0.92</td>
<td style="text-align:right">0.65</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">-1.00</td>
<td style="text-align:right">8.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">highway08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">25.34</td>
<td style="text-align:right">9.90</td>
<td style="text-align:right">9.00</td>
<td style="text-align:right">20.00</td>
<td style="text-align:right">24.00</td>
<td style="text-align:right">28.00</td>
<td style="text-align:right">140.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">highway08U</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">10.65</td>
<td style="text-align:right">16.37</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">24.00</td>
<td style="text-align:right">140.14</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">highwayA08</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.99</td>
<td style="text-align:right">6.54</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">121.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">highwayA08U</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.81</td>
<td style="text-align:right">6.36</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">121.20</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">highwayCD</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.03</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">4.06</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">highwayE</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.81</td>
<td style="text-align:right">6.05</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">120.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">highwayUF</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.04</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.91</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">hlv</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">1.94</td>
<td style="text-align:right">5.88</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">49.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">hpv</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">9.83</td>
<td style="text-align:right">27.57</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">195.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">23440.52</td>
<td style="text-align:right">13598.91</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">11641.75</td>
<td style="text-align:right">23436.50</td>
<td style="text-align:right">35257.25</td>
<td style="text-align:right">47005.00</td>
<td style="text-align:left">▇▇▇▇▇</td>
</tr>
<tr>
<td style="text-align:left">lv2</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">1.73</td>
<td style="text-align:right">4.27</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">41.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">lv4</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">5.95</td>
<td style="text-align:right">9.49</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">13.00</td>
<td style="text-align:right">55.00</td>
<td style="text-align:left">▇▃▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">pv2</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">13.11</td>
<td style="text-align:right">30.65</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">194.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">pv4</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">33.16</td>
<td style="text-align:right">45.97</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">91.00</td>
<td style="text-align:right">192.00</td>
<td style="text-align:left">▇▁▅▁▁</td>
</tr>
<tr>
<td style="text-align:left">range</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">3.01</td>
<td style="text-align:right">28.36</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">520.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">rangeCity</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">1.67</td>
<td style="text-align:right">21.19</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">520.80</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">rangeCityA</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.17</td>
<td style="text-align:right">2.73</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">135.28</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">rangeHwy</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">1.55</td>
<td style="text-align:right">19.93</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">520.50</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">rangeHwyA</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.16</td>
<td style="text-align:right">2.47</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">114.76</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">UCity</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">24.59</td>
<td style="text-align:right">15.76</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">18.60</td>
<td style="text-align:right">22.00</td>
<td style="text-align:right">26.58</td>
<td style="text-align:right">224.80</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">UCityA</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">1.12</td>
<td style="text-align:right">9.12</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">207.26</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">UHighway</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">35.61</td>
<td style="text-align:right">14.21</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">28.00</td>
<td style="text-align:right">33.75</td>
<td style="text-align:right">39.80</td>
<td style="text-align:right">187.10</td>
<td style="text-align:left">▇▃▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">UHighwayA</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.91</td>
<td style="text-align:right">5.93</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">173.14</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">year</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">2003.90</td>
<td style="text-align:right">12.34</td>
<td style="text-align:right">1984.00</td>
<td style="text-align:right">1992.00</td>
<td style="text-align:right">2005.00</td>
<td style="text-align:right">2015.00</td>
<td style="text-align:right">2024.00</td>
<td style="text-align:left">▇▅▆▆▆</td>
</tr>
<tr>
<td style="text-align:left">youSaveSpend</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">-5546.03</td>
<td style="text-align:right">4574.74</td>
<td style="text-align:right">-39750.00</td>
<td style="text-align:right">-8250.00</td>
<td style="text-align:right">-5000.00</td>
<td style="text-align:right">-2750.00</td>
<td style="text-align:right">7750.00</td>
<td style="text-align:left">▁▁▁▇▂</td>
</tr>
<tr>
<td style="text-align:left">charge240b</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.02</td>
<td style="text-align:right">0.32</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">9.60</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">phevCity</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.28</td>
<td style="text-align:right">3.78</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">97.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">phevHwy</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.28</td>
<td style="text-align:right">3.67</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">81.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
<tr>
<td style="text-align:left">phevComb</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.00</td>
<td style="text-align:right">0.28</td>
<td style="text-align:right">3.70</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">0.00</td>
<td style="text-align:right">88.00</td>
<td style="text-align:left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<h1 id="data-exploration">Data Exploration</h1>
<p>Let&rsquo;s start the data exploration by looking at how many vehicles were added in each year.
Before we start, I like to use a common theme for ggplot in the document, add that first.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Global document theme</span>
</span></span><span style="display:flex;"><span>theme_glob <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">theme_bw</span>(base_family<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Helvetica&#34;</span>, base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(angle <span style="color:#f92672">=</span> <span style="color:#ae81ff">45</span>, vjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>), legend.direction <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;horizontal&#34;</span>, legend.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme_set</span>(theme_glob)
</span></span></code></pre></div><h2 id="vehicles-and-years">Vehicles and Years</h2>
<p>How many models are released per year?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Add some extra information for later use</span>
</span></span><span style="display:flex;"><span>vehicles <span style="color:#f92672">&lt;-</span> vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(fuelType_f <span style="color:#f92672">=</span> <span style="color:#a6e22e">gsub</span>(fuelType1, pattern <span style="color:#f92672">=</span> <span style="color:#a6e22e">regex</span>(<span style="color:#e6db74">&#39;.*Gasoline&#39;</span>, ignore_case <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>), replacement <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>current_model_year <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(vehicles<span style="color:#f92672">$</span>year)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x<span style="color:#f92672">=</span>year)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_bar</span>( <span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> year), stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;count&#34;</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Models by Year&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Count of models&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(breaks <span style="color:#f92672">=</span>  <span style="color:#a6e22e">seq</span>( <span style="color:#a6e22e">min</span>(vehicles<span style="color:#f92672">$</span>year), <span style="color:#a6e22e">max</span>(vehicles<span style="color:#f92672">$</span>year), by <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>) )
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-5-1.png" width="672" />
<h2 id="vehicles-and-manufacturers">Vehicles and Manufacturers</h2>
<p>How many manufacturers do we have?
We have 143 total number of manufacturers in our list. Here are the top 20.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">count</span>(make) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">20</span>, wt <span style="color:#f92672">=</span> n ) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(make, n), y <span style="color:#f92672">=</span> n )) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_bar</span>( <span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> make), stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Top manufacturers by number of models&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Count of models&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Make&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>()
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-6-1.png" width="672" />
<p>WTF, Chevrolet has close to 4000 models - this is not a real number because each manufacturer (make) has the same model coming back in a different year. We will need to identify truly unique models.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">count</span>(make, model) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">count</span>(make) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">20</span>, wt <span style="color:#f92672">=</span> n) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(make, n), y <span style="color:#f92672">=</span> n )) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_bar</span>( <span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> make), stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Top manufacturers by number of models - adjusted for model year&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Count of models&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Make&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() 
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-7-1.png" width="672" />
<p>This looks a lot better - Mercedes and BMW are the most prolific manufacturers with over 300 models.</p>
<h1 id="fuel-economy">Fuel Economy</h1>
<p>Let&rsquo;s dive into an analysis of fuel economy and see how things have changed over the year, clearly economy has gone up but seems to have suffered recently. We will try and investigate why that happened.
The other issue is that this data contains other types of alternative fuels, we need to adjust for different fuel types.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(avgMPG <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(comb08)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x<span style="color:#f92672">=</span>year, y <span style="color:#f92672">=</span> avgMPG)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> avgMPG), alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> avgMPG), show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(breaks <span style="color:#f92672">=</span>  <span style="color:#a6e22e">seq</span>( <span style="color:#a6e22e">min</span>(vehicles<span style="color:#f92672">$</span>year), <span style="color:#a6e22e">max</span>(vehicles<span style="color:#f92672">$</span>year), by <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>) ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_gradientn</span>(colours<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;red&#34;</span>, <span style="color:#e6db74">&#34;blue&#34;</span>, <span style="color:#e6db74">&#34;green&#34;</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Average fuel economy over the years&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Avg MPG&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-8-1.png" width="672" />
<h2 id="by-fuel-type">By Fuel type</h2>
<p>Let&rsquo;s look at the vehicles by the type of fuel - we had previously added an additional column that describes the different fuel types for these vehicles.
Clearly, electric powered vehicles have an edge over other forms of fuel.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year, fuelType_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(avgMPG <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(comb08), .groups <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;drop&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x<span style="color:#f92672">=</span>year, y <span style="color:#f92672">=</span> avgMPG)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> avgMPG), alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.7</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> avgMPG), alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(breaks <span style="color:#f92672">=</span>  <span style="color:#a6e22e">seq</span>( <span style="color:#a6e22e">min</span>(vehicles<span style="color:#f92672">$</span>year), <span style="color:#a6e22e">max</span>(vehicles<span style="color:#f92672">$</span>year), by <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>) ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_gradientn</span>(colours<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;red&#34;</span>, <span style="color:#e6db74">&#34;green&#34;</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Average fuel economy over the years by fuel type&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Avg MPG&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> fuelType_f, scales <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;free&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(angle <span style="color:#f92672">=</span> <span style="color:#ae81ff">45</span>, vjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>), legend.direction <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;horizontal&#34;</span>, legend.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-9-1.png" width="672" />
<h2 id="by-vehicle-class">By Vehicle class</h2>
<p>For this we will limit ourselves to Gasoline fueled vehicles since not all vehicles are made equal, let&rsquo;s also try and see how different vehicle classes score.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year, VClass) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(avgMPG <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(comb08)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  ggridges<span style="color:#f92672">::</span><span style="color:#a6e22e">geom_density_ridges</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> avgMPG, y <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(VClass), fill <span style="color:#f92672">=</span> VClass), rel_min_height <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.001</span>, scale <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Fuel economy density by Vehicle class&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Vehicle Class&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Avg MPG&#34;</span>) 
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-10-1.png" width="672" />
<p>It&rsquo;s clear that we are comparing apples to oranges - let&rsquo;s roll up the data to create some vehicle classes and try this again.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">&lt;-</span> vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(VClass_f <span style="color:#f92672">=</span> <span style="color:#a6e22e">case_when</span>(<span style="color:#a6e22e">str_detect</span>(VClass, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Trucks&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Pickup Trucks&#34;</span>,
</span></span><span style="display:flex;"><span>                              <span style="color:#a6e22e">str_detect</span>(VClass, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Cars|Wagons&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Cars&#34;</span>,
</span></span><span style="display:flex;"><span>                              <span style="color:#a6e22e">str_detect</span>(VClass, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Sport&#34;</span>) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;SUV&#34;</span>,
</span></span><span style="display:flex;"><span>                              <span style="color:#a6e22e">str_detect</span>(VClass, pattern <span style="color:#f92672">=</span> <span style="color:#a6e22e">regex</span>(<span style="color:#e6db74">&#34;van&#34;</span>, ignore_case <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) ) <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Vans&#34;</span>, 
</span></span><span style="display:flex;"><span>                              <span style="color:#66d9ef">TRUE</span> <span style="color:#f92672">~</span> <span style="color:#e6db74">&#34;Other&#34;</span>))
</span></span></code></pre></div><p>We can start to see the range of mpg averages over the different vehicle classes. This graph represents the density (relative proportions) of mpg ratings in each vehicle class.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span> , fuelType2 <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>( VClass) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(avgMPG <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(comb08)) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">ungroup</span>() <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> avgMPG, y <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(VClass_f))) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_density_ridges</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> VClass_f), rel_min_height <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.001</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.7</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Fuel economy density by Vehicle class&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Vehicle Class&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Avg MPG&#34;</span>) 
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-12-1.png" width="672" />
<p>Let&rsquo;s see what kind of engine displacements we are talking about in this set. It&rsquo;s clear that there is a correlation between displacement and fuel economy. We will explore that later.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span>, fuelType2 <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>( VClass) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(avgDispl <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(displ)) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">ungroup</span>() <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> avgDispl, y <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(VClass_f))) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_density_ridges</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> VClass_f), rel_min_height <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.001</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.7</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Engine displacement density by Vehicle class&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Vehicle Class&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Engine displacement (litres)&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_continuous</span>(breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1.6</span>,<span style="color:#ae81ff">6</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.4</span>))
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-13-1.png" width="672" />
<h2 id="engine-displacement-vs-fuel-economy">Engine displacement vs fuel economy</h2>
<ul>
<li>Not including plug-in hybrids.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span> , fuelType2 <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>, year <span style="color:#f92672">==</span> current_model_year) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(y<span style="color:#f92672">=</span>comb08, x <span style="color:#f92672">=</span> displ)) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> VClass_f, group <span style="color:#f92672">=</span> VClass_f), position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;jitter&#34;</span>,  na.rm <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span> ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Set1&#34;</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Engine displacement vs Fuel Economy&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Avg MPG&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Engine displacement (litres)&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">guides</span>(color <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Vehicle class&#34;</span>))  
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-14-1.png" width="672" />
<p>Let&rsquo;s also see how has economy improved over the years for each of these segments; cars and Vans have had the most improvement over time and SUVs are a relatively new segment and were only defined near 2000.
The second chart shows the relative numbers of models in each class.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span>,VClass_f <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Other&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year, VClass_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(avgMPG <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(comb08)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ungroup</span>() <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> avgMPG)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> VClass_f), alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_smooth</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> VClass_f))  <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Fuel economy by Vehicle class over time&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Avg MPG&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">guides</span>(color <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Vehicle class&#34;</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Set1&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-15-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span>,VClass_f <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Other&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(year, VClass_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ungroup</span>() <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> year, y <span style="color:#f92672">=</span> ..count..)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_area</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> VClass_f), stat<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bin&#34;</span>, position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fill&#34;</span>, binwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Percentage of models by Vehicle Class (Gasoline only)&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Class size&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">guides</span>(fill <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Vehicle class&#34;</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(labels <span style="color:#f92672">=</span> scales<span style="color:#f92672">::</span>percent, breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">.25</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_fill_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Set1&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-16-1.png" width="672" />
<h2 id="by-manufacturers">By manufacturers</h2>
<p>Are there manufacturers that have done a better job compared to the others? Let&rsquo;s start by seeing what the range of mileage is in our data set, still only looking at the Gasoline segment only. Let&rsquo;s do this for the last three model years only.
We can see a wide swing in range between different models from a manufacturer. Hyundai seems quite curious with a range from 17 to 58 mpg, we&rsquo;ll try and explore that further.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Gasoline&#39;</span>,VClass_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Cars&#34;</span>, <span style="color:#a6e22e">between</span>(year, current_model_year<span style="color:#ae81ff">-3</span>, current_model_year)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(make) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(min <span style="color:#f92672">=</span> <span style="color:#a6e22e">min</span>(comb08), max <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(comb08)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(make, <span style="color:#f92672">-</span>(max <span style="color:#f92672">-</span> min), order <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span> ), y <span style="color:#f92672">=</span> max, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)  <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> make, y <span style="color:#f92672">=</span> min, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_segment</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> make, xend <span style="color:#f92672">=</span> make, y <span style="color:#f92672">=</span> min, yend <span style="color:#f92672">=</span> max, color <span style="color:#f92672">=</span> make), linewidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">60</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#a6e22e">paste0</span>(<span style="color:#e6db74">&#34;Range of Avg MPG (&#34;</span>, current_model_year <span style="color:#ae81ff">-3</span>, <span style="color:#e6db74">&#34;-&#34;</span>, current_model_year, <span style="color:#e6db74">&#34; models)&#34;</span>), x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Make&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Min &lt;--MPG --&gt; Max&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-17-1.png" width="672" />
<h2 id="most-improved">Most Improved</h2>
<p>My goal here is to find the most fuel efficient vehicles. There are many ways to slice this data to find the best vehicles; by make, by vehicle class, by fuel type, by engine size, seating capacity and many other ways. One interesting metric would be to see which models have the most improved efficiency over time. We will find vehicles that are still being sold in the current model year and have been around for at least three model years. Once more, we&rsquo;ll limit our set to Gasoline powered vehicles only. The chart below shows the most improved and ones that have gotten much worse over the years.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Find models that are still being sold in the current model year</span>
</span></span><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> <span style="color:#ae81ff">2019</span>, fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Gasoline&#34;</span>, VClass_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Cars&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distinct</span>(make, model, fuelType_f, trany, fuelType, cylinders) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">inner_join</span>(vehicles, by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;make&#34;</span>, <span style="color:#e6db74">&#34;model&#34;</span>, <span style="color:#e6db74">&#34;trany&#34;</span>, <span style="color:#e6db74">&#34;fuelType&#34;</span>, <span style="color:#e6db74">&#34;cylinders&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(make, model, trany, fuelType, cylinders) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(years_sold <span style="color:#f92672">=</span> <span style="color:#a6e22e">n_distinct</span>(year), mpg_start <span style="color:#f92672">=</span> comb08<span style="color:#a6e22e">[which.min</span>(year)], mpg_end <span style="color:#f92672">=</span> comb08<span style="color:#a6e22e">[which.max</span>(year)], mpg_range <span style="color:#f92672">=</span> mpg_end <span style="color:#f92672">-</span> mpg_start, min_year <span style="color:#f92672">=</span> year<span style="color:#a6e22e">[which.min</span>(year)], max_year <span style="color:#f92672">=</span> year<span style="color:#a6e22e">[which.max</span>(year)], .groups <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;drop&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(avg_range <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(mpg_range), sd_range <span style="color:#f92672">=</span> <span style="color:#a6e22e">sd</span>(mpg_range), shift <span style="color:#f92672">=</span> <span style="color:#a6e22e">if_else</span>(mpg_range <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;Better&#34;</span>, <span style="color:#e6db74">&#34;Worse&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(years_sold <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span>, mpg_range <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">*</span> sd_range <span style="color:#f92672">|</span> mpg_range <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">-2</span><span style="color:#f92672">*</span> sd_range) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(model, <span style="color:#f92672">-</span>mpg_start), y <span style="color:#f92672">=</span> mpg_end, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> model, y <span style="color:#f92672">=</span> mpg_start, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> , show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_segment</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> model, xend <span style="color:#f92672">=</span> model, y <span style="color:#f92672">=</span> mpg_start, yend <span style="color:#f92672">=</span> <span style="color:#a6e22e">if_else</span>(shift <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Better&#34;</span>, mpg_end <span style="color:#ae81ff">-0.65</span>, mpg_end <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.65</span>), color <span style="color:#f92672">=</span> make), linejoin <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mitre&#34;</span>, arrow <span style="color:#f92672">=</span> <span style="color:#a6e22e">arrow</span>(length <span style="color:#f92672">=</span> <span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">0.03</span>, <span style="color:#e6db74">&#34;npc&#34;</span>), type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;closed&#34;</span>), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_text_repel</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> model, y <span style="color:#f92672">=</span> mpg_start, label <span style="color:#f92672">=</span> min_year), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">2.5</span> ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">60</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Change in Avg MPG&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Model&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPG&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span>shift, scales <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;free&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>()
</span></span></code></pre></div><pre tabindex="0"><code>## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
## ℹ Please use `linewidth` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.
</code></pre><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-18-1.png" width="672" />
<h2 id="most-fuel-efficient-models-in-class">Most fuel efficient Models in class</h2>
<p>Let&rsquo;s look at the real fuel sippers by class of vehicle - we&rsquo;ll start by the larger class and then refine further into smaller sub-classes. All these are the most recent models and all are Gasoline powered. We will look at other fuel types separately.</p>
<h3 id="by-vehicle-class-1">By Vehicle class</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> current_model_year, fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Gasoline&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">20</span>, wt <span style="color:#f92672">=</span> comb08) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(model, comb08), y <span style="color:#f92672">=</span> comb08, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Highest MPG overall (combined)&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Model&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPG&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">60</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Dark2&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-19-1.png" width="672" />
<h3 id="by-vehicle-type">By Vehicle type</h3>
<p>Since SUVs and Cars are the biggest segments - let&rsquo;s limit to those.
Only look for full gasoline or hybrid vehicles, exclude any plug in hybrids</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> current_model_year, fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Gasoline&#34;</span>, fuelType2 <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>, VClass_f <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Cars&#34;</span>, <span style="color:#e6db74">&#34;SUV&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(VClass_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distinct</span>(model, .keep_all <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">15</span>, wt <span style="color:#f92672">=</span> comb08) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(model, comb08), y <span style="color:#f92672">=</span> comb08, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Highest MPG overall (combined)&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Model&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPG&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">60</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#scale_color_brewer(palette = &#34;Dark2&#34;) +</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> VClass_f, scales <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;free&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-20-1.png" width="672" />
<p>Before we move on, let&rsquo;s take a quick look at the worst overall MPG</p>
<h3 id="worst-mpg">Worst MPG</h3>
<p>Gasoline Cars - current model year
Looking at this, at least Rolls Royce is constiently bad across most of it&rsquo;s models and Grand Cherokee Trackhawk is a 800 bhp, 0 - 60 in less than 3 second beast.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> current_model_year, fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Gasoline&#34;</span>, fuelType2 <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>, VClass_f <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Cars&#34;</span>, <span style="color:#e6db74">&#34;SUV&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(VClass_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distinct</span>(model, .keep_all <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">5</span>, wt <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>comb08) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(model, comb08), y <span style="color:#f92672">=</span> comb08, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Lowest MPG overall (combined)&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Model&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPG&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#scale_y_continuous(breaks = seq(10,18, by = 2)) +</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Dark2&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> VClass_f, scales <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;free&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-21-1.png" width="672" />
<h2 id="electric-vehicles">Electric Vehicles</h2>
<p>Before looking at the data, a quick look a the number of models for each fuel type</p>
<h3 id="different-fuel-types">Different Fuel Types</h3>
<ul>
<li>Current model year only</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> current_model_year, VClass_f <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Other&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(fuelType_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>( x <span style="color:#f92672">=</span> fuelType_f)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_bar</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> fuelType_f)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_fill_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Set1&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_grid</span>(<span style="color:#f92672">~</span> VClass_f, scales <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;free&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Count of models by fuel type - Current model year&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Class size&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Fuel Type&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">guides</span>(fill <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_legend</span>(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Vehicle class&#34;</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_label</span>(stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;count&#34;</span>, <span style="color:#a6e22e">aes</span>(label <span style="color:#f92672">=</span> ..count.., y <span style="color:#f92672">=</span> ..count..)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(angle <span style="color:#f92672">=</span> <span style="color:#ae81ff">45</span>, vjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>), legend.direction <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;horizontal&#34;</span>, legend.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;top&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-22-1.png" width="672" />
<p>While EVs are still an extremely small segment of the total passenger vehicle segment, they are certainly starting to be noticed.
Let&rsquo;s look at the electric vehicle stats before we move to some machine learning.</p>
<h3 id="electric-effciency">Electric Effciency</h3>
<p>We&rsquo;ll look at the transitional electric vehicles first - these are also called the plug-in electric vehicles where they retain an IC engine along with some battery.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType2 <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>, year <span style="color:#f92672">==</span> current_model_year <span style="color:#ae81ff">-1</span>, VClass_f <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Cars&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(VClass_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distinct</span>(model, .keep_all <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">15</span>, wt <span style="color:#f92672">=</span> comb08) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(model, comb08), y <span style="color:#f92672">=</span> comb08, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Highest MPG overall (Plug in hybrids)&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Model&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPG&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_y_continuous</span>(breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">60</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_color_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Dark2&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> VClass_f, scales <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;free&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-23-1.png" width="672" />
<h3 id="fully-electric">Fully electric</h3>
<p>Hyundai seems to have taken the top spots in both the Cars and SUV segments and Tesla is doing well in both segments.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>,  VClass_f <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Cars&#34;</span>, <span style="color:#e6db74">&#34;SUV&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(VClass_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distinct</span>(model, .keep_all <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">10</span>, wt <span style="color:#f92672">=</span> comb08) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(model, comb08), y <span style="color:#f92672">=</span> comb08, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Highest MPGe overall (Full electric)&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Model&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPG&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> VClass_f, scales <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;free&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_discrete</span>(labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">function</span>(x) <span style="color:#a6e22e">abbreviate</span>(x, minlength <span style="color:#f92672">=</span> <span style="color:#ae81ff">11L</span>))
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-24-1.png" width="672" />
<h3 id="fully-electric-range">Fully electric range</h3>
<p>What kind of range do we get at the top of the heap and it&rsquo;s clear that Tesla has done a phenomenal job both in efficiency and range.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>, VClass_f <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Cars&#34;</span>, <span style="color:#e6db74">&#34;SUV&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(VClass_f) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distinct</span>(model, .keep_all <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">top_n</span>(<span style="color:#ae81ff">10</span>, wt <span style="color:#f92672">=</span> range) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">reorder</span>(model, range), y <span style="color:#f92672">=</span> range, color <span style="color:#f92672">=</span> make), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Longest Range (Full electric)&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Model&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Range (miles)&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> VClass_f, scales <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;free&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_x_discrete</span>(labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">function</span>(x) <span style="color:#a6e22e">abbreviate</span>(x, minlength <span style="color:#f92672">=</span> <span style="color:#ae81ff">11L</span>))
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-25-1.png" width="672" />
<h1 id="machine-learning">Machine Learning</h1>
<p>This is a great dataset to try and dig into machine learning.
Start with some clustering</p>
<h2 id="clustering">Clustering</h2>
<p>Clustering is process of grouping together similar items. In this case we want to see which vehicles are most like another and form groups.</p>
<p>Before we get into the actual clustering, we&rsquo;ll try and identify which variables are related and which are ones that are important.
We&rsquo;ll use a technique called Principal Component Analysis. Let&rsquo;s take a look at what the data looks like; some of these are clearly propotinally and linearly related, while others have some more spread out variations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>data <span style="color:#f92672">&lt;-</span> vehicles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> current_model_year, fuelType_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Gasoline&#34;</span>, fuelType2 <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Electricity&#34;</span>,  VClass_f <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Cars&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distinct</span>( model,  trany,  cylinders, .keep_all <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(model <span style="color:#f92672">=</span> <span style="color:#a6e22e">paste</span>(model, trany, cylinders, sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">select</span>(model, barrels08, co2TailpipeGpm, comb08, cylinders, displ, fuelCost08, highway08, city08, youSaveSpend)
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">na.omit</span>(data)
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.data.frame</span>(data)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">rownames</span>(data) <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">$</span>model
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">select</span>(data, <span style="color:#f92672">-</span>model)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(data)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-26-1.png" width="672" />
<p>Before we run the principal components, we&rsquo;ll scale the data to normalize it - that will ensure that the data ranges are normalized and one single element does not have a large range and does not dominate.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">scale</span>(data)
</span></span><span style="display:flex;"><span>pc <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">princomp</span>(df)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(pc)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-27-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(pc, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;l&#39;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-27-2.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">summary</span>(pc)
</span></span></code></pre></div><pre tabindex="0"><code>## Importance of components:
##                           Comp.1     Comp.2     Comp.3     Comp.4      Comp.5
## Standard deviation     2.8679524 0.69353668 0.34128805 0.23797680 0.196730951
## Proportion of Variance 0.9194782 0.05376956 0.01302086 0.00633092 0.004326562
## Cumulative Proportion  0.9194782 0.97324778 0.98626865 0.99259957 0.996926128
##                            Comp.6       Comp.7       Comp.8       Comp.9
## Standard deviation     0.15390415 0.0565386169 2.478054e-02 9.684188e-09
## Proportion of Variance 0.00264788 0.0003573452 6.864661e-05 1.048393e-17
## Cumulative Proportion  0.99957401 0.9999313534 1.000000e+00 1.000000e+00
</code></pre><p>Given these charts, we will use the first three components from this data since most variation is present in these three.
We have now simplified the data into fewer dimensions that have the most variance and are therefore the most important in deciding clusters.
The columns we have selected are barrels08, co2TailpipeGpm, comb08</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pc <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">prcomp</span>(df)
</span></span><span style="display:flex;"><span>comp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(pc<span style="color:#f92672">$</span>x[,<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(comp, pch<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>, col<span style="color:#f92672">=</span><span style="color:#a6e22e">rgb</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0.5</span>))
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-28-1.png" width="672" />
<h3 id="k-means">K-means</h3>
<p>The k means algorithm tries to create groups of observations by minimizing the distance between the observations, the other question to answer as we do this is to find out the optimal number of clusters.
A second thing to note is that since all our data has many different ranges, to compare standard measures, we&rsquo;ll re-scale all the data after removing all non-numeric data.</p>
<p>One of the first things we need to identify is an optimum number of clusters we should seek.
Here I used the code from <a href="http://www.statmethods.net/advstats/cluster.html">R in Action</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Determine number of clusters</span>
</span></span><span style="display:flex;"><span>wss <span style="color:#f92672">&lt;-</span> (<span style="color:#a6e22e">nrow</span>(comp)<span style="color:#ae81ff">-1</span>)<span style="color:#f92672">*</span><span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">apply</span>(comp,<span style="color:#ae81ff">2</span>,var))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">15</span>) wss[i] <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">kmeans</span>(comp,
</span></span><span style="display:flex;"><span>                                     centers<span style="color:#f92672">=</span>i)<span style="color:#f92672">$</span>withinss)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">15</span>, wss, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;b&#34;</span>, xlab<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number of Clusters&#34;</span>,
</span></span><span style="display:flex;"><span>     ylab<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Within groups sum of squares&#34;</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-29-1.png" width="672" />
<p>Based on the scree plot above, let&rsquo;s go with 5 clusters within this data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Only do this for gasoline cars initially</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">1215</span>)
</span></span><span style="display:flex;"><span>k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">kmeans</span>(data, <span style="color:#ae81ff">5</span>, nstart<span style="color:#f92672">=</span><span style="color:#ae81ff">25</span>, iter.max<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">palette</span>(<span style="color:#a6e22e">alpha</span>(<span style="color:#a6e22e">brewer.pal</span>(<span style="color:#ae81ff">9</span>,<span style="color:#e6db74">&#39;Set1&#39;</span>), <span style="color:#ae81ff">0.5</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(comp, col<span style="color:#f92672">=</span>k<span style="color:#f92672">$</span>clust, pch<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>)
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-30-1.png" width="672" />
<p>Finally, we can identify the vehicles that have been clustered together.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>clust <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">names</span>(<span style="color:#a6e22e">table</span>(k<span style="color:#f92672">$</span>clust))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># First cluster</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">map</span>(clust, <span style="color:#a6e22e">function</span>(x) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">row.names</span>(data[k<span style="color:#f92672">$</span>clust<span style="color:#f92672">==</span>x,])
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><pre tabindex="0"><code>## [[1]]
##  [1] &#34;Ghibli Trofeo-Automatic 8-spd-8&#34;       
##  [2] &#34;Quattroporte Trofeo-Automatic 8-spd-8&#34; 
##  [3] &#34;Urus Performante-Automatic (S8)-8&#34;     
##  [4] &#34;CT5 V-Manual 6-spd-8&#34;                  
##  [5] &#34;CT5 V-Automatic (S10)-8&#34;               
##  [6] &#34;Phantom-Automatic (S8)-12&#34;             
##  [7] &#34;Phantom Extended-Automatic (S8)-12&#34;    
##  [8] &#34;Ghost-Automatic (S8)-12&#34;               
##  [9] &#34;Ghost Extended-Automatic (S8)-12&#34;      
## [10] &#34;Ghost Black Badge-Automatic (S8)-12&#34;   
## [11] &#34;Cullinan-Automatic (S8)-12&#34;            
## [12] &#34;Cullinan Black Badge-Automatic (S8)-12&#34;
## 
## [[2]]
##  [1] &#34;Cooper S Convertible-Manual 6-spd-4&#34;            
##  [2] &#34;John Cooper Works Convertible-Automatic (S8)-4&#34; 
##  [3] &#34;430i Coupe-Automatic (S8)-4&#34;                    
##  [4] &#34;430i xDrive Coupe-Automatic (S8)-4&#34;             
##  [5] &#34;430i Convertible-Automatic (S8)-4&#34;              
##  [6] &#34;430i xDrive Convertible-Automatic (S8)-4&#34;       
##  [7] &#34;840i Coupe-Automatic (S8)-6&#34;                    
##  [8] &#34;840i xDrive Coupe-Automatic (S8)-6&#34;             
##  [9] &#34;840i Convertible-Automatic (S8)-6&#34;              
## [10] &#34;840i xDrive Convertible-Automatic (S8)-6&#34;       
## [11] &#34;Cooper S Hardtop 2 door-Manual 6-spd-4&#34;         
## [12] &#34;Cooper S Hardtop 4 door-Manual 6-spd-4&#34;         
## [13] &#34;John Cooper Works Hardtop 2 door-Manual 6-spd-4&#34;
## [14] &#34;430i Gran Coupe-Automatic (S8)-4&#34;               
## [15] &#34;430i xDrive Gran Coupe-Automatic (S8)-4&#34;        
## [16] &#34;840i Gran Coupe-Automatic (S8)-6&#34;               
## [17] &#34;840i xDrive Gran Coupe-Automatic (S8)-6&#34;        
## [18] &#34;Cooper Countryman-Automatic (AM-S7)-3&#34;          
## [19] &#34;Cooper Countryman All4-Automatic (S8)-3&#34;        
## [20] &#34;John Cooper Works Clubman All4-Automatic (S8)-4&#34;
## [21] &#34;JCW Countryman All4-Automatic (S8)-4&#34;           
## [22] &#34;M440i Coupe-Automatic (S8)-6&#34;                   
## [23] &#34;M440i xDrive Coupe-Automatic (S8)-6&#34;            
## [24] &#34;M440i Convertible-Automatic (S8)-6&#34;             
## [25] &#34;M440i xDrive Convertible-Automatic (S8)-6&#34;      
## [26] &#34;M440i Gran Coupe-Automatic (S8)-6&#34;              
## [27] &#34;M440i xDrive Gran Coupe-Automatic (S8)-6&#34;       
## [28] &#34;Cooper S Clubman-Manual 6-spd-4&#34;                
## [29] &#34;Cooper S Countryman-Automatic (AM-S7)-4&#34;        
## [30] &#34;Cooper S Countryman All4-Automatic (S8)-4&#34;      
## [31] &#34;Cooper S Clubman All4-Automatic (S8)-4&#34;         
## [32] &#34;Giulia-Automatic 8-spd-4&#34;                       
## [33] &#34;Giulia AWD-Automatic 8-spd-4&#34;                   
## [34] &#34;RS 3-Automatic (AM-S7)-5&#34;                       
## [35] &#34;S3-Automatic (AM-S7)-4&#34;                         
## [36] &#34;M240i Coupe-Automatic (S8)-6&#34;                   
## [37] &#34;228i xDrive Gran Coupe-Automatic (S8)-4&#34;        
## [38] &#34;228i Gran Coupe-Automatic (S8)-4&#34;               
## [39] &#34;M235i xDrive Gran Coupe-Automatic (S8)-4&#34;       
## [40] &#34;330i xDrive Sedan-Automatic (S8)-4&#34;             
## [41] &#34;S60 B5 AWD-Automatic (S8)-4&#34;                    
## [42] &#34;XF P250-Automatic (S8)-4&#34;                       
## [43] &#34;S90 B6 AWD-Automatic (S8)-4&#34;                    
## [44] &#34;Integra-Manual 6-spd-4&#34;                         
## [45] &#34;G80 AWD-Automatic (S8)-4&#34;                       
## [46] &#34;V60CC B5 AWD-Automatic (S8)-4&#34;                  
## [47] &#34;V90CC B6 AWD-Automatic (S8)-4&#34;                  
## [48] &#34;230i xDrive Coupe-Automatic (S8)-4&#34;             
## [49] &#34;M240i xDrive Coupe-Automatic (S8)-6&#34;            
## [50] &#34;M340i Sedan-Automatic (S8)-6&#34;                   
## [51] &#34;M340i xDrive Sedan-Automatic (S8)-6&#34;            
## [52] &#34;CT4-Automatic (S10)-4&#34;                          
## [53] &#34;CT4-Automatic (S8)-4&#34;                           
## [54] &#34;CT4 AWD-Automatic (S8)-4&#34;                       
## [55] &#34;CT4 AWD-Automatic (S10)-4&#34;                      
## [56] &#34;CT4 V AWD-Automatic (S10)-4&#34;                    
## [57] &#34;CT4 V-Automatic (S10)-4&#34;                        
## [58] &#34;CT5-Automatic (S10)-4&#34;                          
## [59] &#34;CT5 AWD-Automatic (S10)-4&#34;                      
## [60] &#34;740i Sedan-Automatic (S8)-6&#34;                    
## 
## [[3]]
##  [1] &#34;M4 Coupe-Manual 6-spd-6&#34;                             
##  [2] &#34;M4 Competition Coupe-Automatic (S8)-6&#34;               
##  [3] &#34;M4 Competition M xDrive Coupe-Automatic (S8)-6&#34;      
##  [4] &#34;M4 Competition M xDrive Convertible-Automatic (S8)-6&#34;
##  [5] &#34;M850i xDrive Coupe-Automatic (S8)-8&#34;                 
##  [6] &#34;M850i xDrive Convertible-Automatic (S8)-8&#34;           
##  [7] &#34;M8 Competition Coupe-Automatic (S8)-8&#34;               
##  [8] &#34;M8 Competition Convertible-Automatic (S8)-8&#34;         
##  [9] &#34;M850i xDrive Gran Coupe-Automatic (S8)-8&#34;            
## [10] &#34;Alpina B8 Gran Coupe-Automatic (S8)-8&#34;               
## [11] &#34;M8 Competition Gran Coupe-Automatic (S8)-8&#34;          
## [12] &#34;M3 CS Sedan-Automatic (S8)-6&#34;                        
## [13] &#34;GT-R-Automatic (AM-S6)-6&#34;                            
## [14] &#34;GranTurismo Trofeo-Automatic 8-spd-6&#34;                
## [15] &#34;GranTurismo Modena-Automatic 8-spd-6&#34;                
## [16] &#34;LC 500 Convertible-Automatic (S10)-8&#34;                
## [17] &#34;RS 5 Coupe-Automatic (S8)-6&#34;                         
## [18] &#34;M2 Coupe-Manual 6-spd-6&#34;                             
## [19] &#34;M2 Coupe-Automatic (S8)-6&#34;                           
## [20] &#34;Mustang-Manual 6-spd-8&#34;                              
## [21] &#34;Mustang-Automatic (S10)-8&#34;                           
## [22] &#34;Mustang Dark Horse-Manual 6-spd-8&#34;                   
## [23] &#34;LC 500-Automatic (S10)-8&#34;                            
## [24] &#34;M3 Sedan-Manual 6-spd-6&#34;                             
## [25] &#34;M3 Competition Sedan-Automatic (S8)-6&#34;               
## [26] &#34;M3 Competition M xDrive Sedan-Automatic (S8)-6&#34;      
## [27] &#34;RS 5 Sportback-Automatic (S8)-6&#34;                     
## [28] &#34;Ghibli GT-Automatic 8-spd-6&#34;                         
## [29] &#34;Ghibli Modena RWD-Automatic 8-spd-6&#34;                 
## [30] &#34;G80 AWD-Automatic (S8)-6&#34;                            
## [31] &#34;G90 AWD-Automatic (S8)-6&#34;                            
## [32] &#34;G90 MHEV-Automatic (S8)-6&#34;                           
## [33] &#34;Quattroporte Modena AWD-Automatic 8-spd-6&#34;           
## [34] &#34;Quattroporte Modena RWD-Automatic 8-spd-6&#34;           
## [35] &#34;Quattroporte GT-Automatic 8-spd-6&#34;                   
## [36] &#34;911 Carrera T-Manual 7-spd-6&#34;                        
## [37] &#34;911 Carrera T-Automatic (AM-S8)-6&#34;                   
## [38] &#34;Mustang Dark Horse-Automatic (S10)-8&#34;                
## [39] &#34;CT4 V-Automatic (S10)-6&#34;                             
## [40] &#34;CT4 V-Manual 6-spd-6&#34;                                
## [41] &#34;Giulia-Automatic 8-spd-6&#34;                            
## [42] &#34;CT5 AWD-Automatic (S10)-6&#34;                           
## [43] &#34;CT5 V AWD-Automatic (S10)-6&#34;                         
## [44] &#34;CT5-Automatic (S10)-6&#34;                               
## [45] &#34;CT5 V-Automatic (S10)-6&#34;                             
## [46] &#34;760i xDrive Sedan-Automatic (S8)-8&#34;                  
## 
## [[4]]
##  [1] &#34;Trax-Automatic 6-spd-3&#34;                              
##  [2] &#34;Legacy AWD-Automatic (AV-S8)-4&#34;                      
##  [3] &#34;Impreza-Automatic (AV-S8)-4&#34;                         
##  [4] &#34;UX 250h-Automatic (AV-S6)-4&#34;                         
##  [5] &#34;UX 250h AWD-Automatic (AV-S6)-4&#34;                     
##  [6] &#34;K5-Automatic (S8)-4&#34;                                 
##  [7] &#34;Envista-Automatic 6-spd-3&#34;                           
##  [8] &#34;Mirage-Automatic (variable gear ratios)-3&#34;           
##  [9] &#34;Mirage G4-Automatic (variable gear ratios)-3&#34;        
## [10] &#34;Jetta-Manual 6-spd-4&#34;                                
## [11] &#34;ES 300h-Automatic (AV-S6)-4&#34;                         
## [12] &#34;3 5-Door 2WD-Manual 6-spd-4&#34;                         
## [13] &#34;3 5-Door 2WD-Automatic (S6)-4&#34;                       
## [14] &#34;3 5-Door 4WD-Automatic (S6)-4&#34;                       
## [15] &#34;Soul-Automatic (variable gear ratios)-4&#34;             
## [16] &#34;Soul Eco dynamics-Automatic (variable gear ratios)-4&#34;
## 
## [[5]]
##  [1] &#34;Cooper Convertible-Automatic (AM-S7)-3&#34;           
##  [2] &#34;Cooper Convertible-Manual 6-spd-3&#34;                
##  [3] &#34;Cooper S Convertible-Automatic (AM-S7)-4&#34;         
##  [4] &#34;Cooper Hardtop 2 door-Automatic (AM-S7)-3&#34;        
##  [5] &#34;Cooper Hardtop 2 door-Manual 6-spd-3&#34;             
##  [6] &#34;Cooper Hardtop 4 door-Automatic (AM-S7)-3&#34;        
##  [7] &#34;Cooper Hardtop 4 door-Manual 6-spd-3&#34;             
##  [8] &#34;Cooper S Hardtop 2 door-Automatic (AM-S7)-4&#34;      
##  [9] &#34;Cooper S Hardtop 4 door-Automatic (AM-S7)-4&#34;      
## [10] &#34;John Cooper Works Hardtop 2 door-Automatic (S8)-4&#34;
## [11] &#34;Cooper S Clubman-Automatic (AM-S7)-4&#34;             
## [12] &#34;Integra-Automatic (AV-S7)-4&#34;                      
## [13] &#34;Integra A-Spec-Automatic (AV-S7)-4&#34;               
## [14] &#34;Integra A-Spec-Manual 6-spd-4&#34;                    
## [15] &#34;K5 AWD-Automatic (S8)-4&#34;                          
## [16] &#34;K5-Automatic (AM-S8)-4&#34;                           
## [17] &#34;HR-V AWD-Automatic (variable gear ratios)-4&#34;      
## [18] &#34;HR-V FWD-Automatic (variable gear ratios)-4&#34;      
## [19] &#34;230i Coupe-Automatic (S8)-4&#34;                      
## [20] &#34;Mustang Performance Package-Automatic (S10)-4&#34;    
## [21] &#34;Mustang-Automatic 10-spd-4&#34;                       
## [22] &#34;LC 500h-Automatic (AV-S10)-6&#34;                     
## [23] &#34;A4 quattro-Automatic (AM-S7)-4&#34;                   
## [24] &#34;330i Sedan-Automatic (S8)-4&#34;                      
## [25] &#34;S60 B5-Automatic (S8)-4&#34;                          
## [26] &#34;A5 Sportback quattro-Automatic (AM-S7)-4&#34;         
## [27] &#34;GTI-Automatic (AM-S7)-4&#34;                          
## [28] &#34;GTI-Manual 6-spd-4&#34;                               
## [29] &#34;ES 350-Automatic (S8)-6&#34;                          
## [30] &#34;ES 350 F Sport-Automatic (S8)-6&#34;                  
## [31] &#34;ES 250 AWD-Automatic (S8)-4&#34;
</code></pre><p>Just as a visual confirmation, let&rsquo;s see what the ranges of the MPG is for these groups.</p>
<p>It&rsquo;s quite clear that cluster 5 are the highest MPG vehicles, cluster 4 are the low MPG vehicles and include the Rolls Royce models.
Kmeans is one of easiest clustering algorithm and there are many other unsupervised learning algorithms that will perform clustering. More on those in future posts.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(data, <span style="color:#a6e22e">aes</span>(x<span style="color:#f92672">=</span>k<span style="color:#f92672">$</span>cluster, y <span style="color:#f92672">=</span> comb08)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_boxplot</span>(<span style="color:#a6e22e">aes</span>(group <span style="color:#f92672">=</span> k<span style="color:#f92672">$</span>cluster, fill <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(k<span style="color:#f92672">$</span>cluster)), show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">scale_fill_brewer</span>(palette <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Set1&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Clusters and Avg MPG&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Cluster&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MPG&#34;</span>) 
</span></span></code></pre></div><img src="https://nitinahuja.github.io/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-32-1.png" width="672" />
<h2 id="conclusion">Conclusion</h2>
<p>In conclusion, we can say that the automotive world is undergoing a sea change and these are exciting times, it remains to be seen which fuel types dominate in the coming years; it&rsquo;s clear that Gasoline as a fuel has had a great run and is by no means done.</p>

              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://nitinahuja.github.io/tags/eda/">EDA</a>

  <a class="tag tag--primary tag--small" href="https://nitinahuja.github.io/tags/machine-learning/">machine learning</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://nitinahuja.github.io/2021/generative-art/" data-tooltip="Generative Art" aria-label="NEXT: Generative Art">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://nitinahuja.github.io/2017/nps-exploratory-text-analysis/" data-tooltip="NPS - Exploratory analysis in R - Text analysis" aria-label="PREVIOUS: NPS - Exploratory analysis in R - Text analysis">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
    <script type="text/javascript">
      var disqus_config = function() {
        this.page.url = 'https:\/\/nitinahuja.github.io\/2018\/vehicle-fuel-economy-exploratory-analysis\/';
        
          this.page.identifier = '\/2018\/vehicle-fuel-economy-exploratory-analysis\/'
        
      };
      (function() {
        
        
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
          document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
          return;
        }
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'viewstate-1';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2023 Nitin Ahuja. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://nitinahuja.github.io/2021/generative-art/" data-tooltip="Generative Art" aria-label="NEXT: Generative Art">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://nitinahuja.github.io/2017/nps-exploratory-text-analysis/" data-tooltip="NPS - Exploratory analysis in R - Text analysis" aria-label="PREVIOUS: NPS - Exploratory analysis in R - Text analysis">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      

    </div>

<div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Nitin Ahuja</h4>
    
      <div id="about-card-bio">A programmer&rsquo;s viewpoint</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Forever learning
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        California
      </div>
    
  </div>
</div>




  
    
      
      <div id="cover" style="background-image:url('https://nitinahuja.github.io/images/cover.jpg');"></div>
    
  



<div id="code-folding-buttons" class="dropdown btn-group pull-right">
  <a class="btn btn-light btn-sm dropdown-toggle" href="#" role="button" id="allCodeToggleButton"
     data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Code
  </a>
  <div class="dropdown-menu" aria-labelledby="allCodeToggleButton">
    <a id="rmd-show-all-code" class="dropdown-item small" href="#">Show all</a>
    <a id="rmd-hide-all-code" class="dropdown-item small" href="#">Hide all</a>
  </div>
</div>





<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://nitinahuja.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>


  
    <script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  

  
    <script src="https://nitinahuja.github.io/js/codefolding.js"></script>
  

  
    <script src="https://nitinahuja.github.io/js/collapse.js"></script>
  

  
    <script src="https://nitinahuja.github.io/js/transition.js"></script>
  

  
    <script src="https://nitinahuja.github.io/js/dropdown.js"></script>
  





 
  <script>
  $( document ).ready(function () {
    window.initializeCodeFolding("show" === "hide");
  });
  

  </script>


</body>
</html>

