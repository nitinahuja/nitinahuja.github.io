

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.51">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Vehicle Fuel Economy - exploratory analysis</title>
    <meta name="author" content="Nitin Ahuja">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.png">
    

    
    <meta name="description" content="Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let’s start by loading the libraries we need:">
    <meta property="og:description" content="Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let’s start by loading the libraries we need:">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Vehicle Fuel Economy - exploratory analysis">
    <meta property="og:url" content="/2018/vehicle-fuel-economy-exploratory-analysis/">
    <meta property="og:site_name" content="A programmer&#39;s viewpoint">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="A programmer&#39;s viewpoint">
    <meta name="twitter:description" content="Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let’s start by loading the libraries we need:">
    
      <meta name="twitter:creator" content="@nitinahuja">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=640">
    

    
      <meta property="og:image" content="/img/car_thumb.jpg">
    
    
      <meta property="og:image" content="/img/car.jpg">
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-105634890-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">A programmer&#39;s viewpoint</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Nitin Ahuja</h4>
        
          <h5 class="sidebar-profile-bio">A programmer&rsquo;s viewpoint</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/nitinahuja">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              "
       style="background-image:url('/img/car.jpg')"
       data-behavior="4">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Vehicle Fuel Economy - exploratory analysis
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2018-11-21T00:00:00Z">
      
  November 21, 2018

    </time>
  
  
  
  
    <span>in</span>
    
      <a class="category-link" href="/categories/classification">Classification</a>, 
    
      <a class="category-link" href="/categories/r">R</a>
    
  


</div>

</div>
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques.
I am going to start by fetching some data from the inter webs, this data is available at the <a href="http://www.fueleconomy.gov/feg/epadata/vehicles.csv.zip">FuelEconomy.gov</a> site.
This file has fuel economy data for all cars sold in the United States for several years.</p>
<p>Let’s start by loading the libraries we need:</p>
<p>We’ll try to load the file directly from the site. This allows us to get the most recent data from the internet.</p>
<pre class="r"><code>#temp &lt;- tempfile()
#download.file(&quot;http://www.fueleconomy.gov/feg/epadata/vehicles.csv.zip&quot;, temp)
#unz(temp, &quot;~/Downloads/vehicles.csv&quot;)
dt &lt;- data.table::fread(&quot;~/Downloads/vehicles.csv&quot;, fill = TRUE)
#unlink(temp)

vehicles &lt;- as_tibble(dt)</code></pre>
<p>We have 40691 rows - that’s a lot of make and models.</p>
<p>Let’s take a look at what this data looks like using the excellent Skimr library for a succinct look.</p>
<pre class="r"><code>skim(vehicles)</code></pre>
<pre><code>## Skim summary statistics
##  n obs: 40691 
##  n variables: 83 
## 
## ── Variable type:character ─────────────────────────────────────────────────────────────────────────────────────────────────
##    variable missing complete     n min max empty n_unique
##     atvType       0    40691 40691   0  14 37219        9
##   c240bDscr       0    40691 40691   0  19 40628        5
##    c240Dscr       0    40691 40691   0  16 40626        6
##   createdOn       0    40691 40691  28  28     0      247
##       drive       0    40691 40691   0  26  1189        9
##    eng_dscr       0    40691 40691   0  40 16034      556
##     evMotor       0    40691 40691   0  51 39900      143
##    fuelType       0    40691 40691   3  27     0       14
##   fuelType1       0    40691 40691   6  17     0        6
##   fuelType2       0    40691 40691   0  11 39108        5
##     guzzler       0    40691 40691   0   1 38284        4
##        make       0    40691 40691   3  34     0      135
##     mfrCode       0    40691 40691   0   3 30818       48
##       model       0    40691 40691   1  47     0     4018
##  modifiedOn       0    40691 40691  28  28     0      120
##     mpgData       0    40691 40691   1   1     0        2
##      rangeA       0    40691 40691   0  11 39113      227
##    sCharger       0    40691 40691   0   1 39874        2
##   startStop       0    40691 40691   0   1 31704        3
##    tCharger       0    40691 40691   0   1 34071        2
##  trans_dscr       0    40691 40691   0  15 25644       53
##       trany       0    40691 40691   0  32    11       38
##      VClass       0    40691 40691   4  34     0       34
## 
## ── Variable type:integer ───────────────────────────────────────────────────────────────────────────────────────────────────
##      variable missing complete     n     mean       sd     p0     p25
##        city08       0    40691 40691    18.27     7.5       6    15  
##       cityA08       0    40691 40691     0.64     4.92      0     0  
##           co2       0    40691 40691    84.95   172.88     -1    -1  
##          co2A       0    40691 40691     5.91    57.34     -1    -1  
##        comb08       0    40691 40691    20.52     7.32      7    17  
##       combA08       0    40691 40691     0.7      4.98      0     0  
##     cylinders     177    40514 40691     5.72     1.76      2     4  
##         engId       0    40691 40691  8255.07 17335.46      0     0  
##       feScore       0    40691 40691     0.3      2.65     -1    -1  
##    fuelCost08       0    40691 40691  2314.91   639.31    500  1850  
##   fuelCostA08       0    40691 40691   100.77   528.2       0     0  
##      ghgScore       0    40691 40691     0.3      2.65     -1    -1  
##     ghgScoreA       0    40691 40691    -0.92     0.66     -1    -1  
##     highway08       0    40691 40691    24.41     7.45      9    20  
##    highwayA08       0    40691 40691     0.8      5.23      0     0  
##           hlv       0    40691 40691     2.01     5.93      0     0  
##           hpv       0    40691 40691    10.28    28.03      0     0  
##            id       0    40691 40691 20462.37 11872.44      1 10173.5
##           lv2       0    40691 40691     1.81     4.37      0     0  
##           lv4       0    40691 40691     6.12     9.65      0     0  
##      phevCity       0    40691 40691     0.13     2.72      0     0  
##      phevComb       0    40691 40691     0.13     2.66      0     0  
##       phevHwy       0    40691 40691     0.13     2.63      0     0  
##           pv2       0    40691 40691    13.55    31.11      0     0  
##           pv4       0    40691 40691    33.79    46.01      0     0  
##         range       0    40691 40691     0.63    11.3       0     0  
##          year       0    40691 40691  2001.34    11.04   1984  1991  
##  youSaveSpend       0    40691 40691 -4069.94  3202.33 -28750 -6000  
##    p50     p75  p100     hist
##     17    20     150 ▇▁▁▁▁▁▁▁
##      0     0     145 ▇▁▁▁▁▁▁▁
##     -1    -1     847 ▇▁▁▁▁▁▁▁
##     -1    -1     713 ▇▁▁▁▁▁▁▁
##     20    23     136 ▇▂▁▁▁▁▁▁
##      0     0     133 ▇▁▁▁▁▁▁▁
##      6     6      16 ▁▇▇▅▁▁▁▁
##    183  4216   69102 ▇▁▁▁▁▁▁▁
##     -1    -1      10 ▇▁▁▁▁▁▁▁
##   2300  2700    7250 ▁▇▇▂▁▁▁▁
##      0     0    3900 ▇▁▁▁▁▁▁▁
##     -1    -1      10 ▇▁▁▁▁▁▁▁
##     -1    -1       8 ▇▁▁▁▁▁▁▁
##     24    28     123 ▇▇▁▁▁▁▁▁
##      0     0     121 ▇▁▁▁▁▁▁▁
##      0     0      49 ▇▁▁▁▁▁▁▁
##      0     0     195 ▇▁▁▁▁▁▁▁
##  20347 30788.5 41046 ▇▇▇▇▇▇▇▇
##      0     0      41 ▇▁▁▁▁▁▁▁
##      0    13      55 ▇▂▂▁▁▁▁▁
##      0     0      97 ▇▁▁▁▁▁▁▁
##      0     0      88 ▇▁▁▁▁▁▁▁
##      0     0      81 ▇▁▁▁▁▁▁▁
##      0     0     194 ▇▁▁▁▁▁▁▁
##      0    91     192 ▇▁▁▂▂▁▁▁
##      0     0     335 ▇▁▁▁▁▁▁▁
##   2002  2011    2019 ▇▅▅▃▅▆▅▇
##  -4000 -1750    5000 ▁▁▁▁▂▇▇▁
## 
## ── Variable type:logical ───────────────────────────────────────────────────────────────────────────────────────────────────
##     variable missing complete     n   mean                      count
##  phevBlended       0    40691 40691 0.0021 FAL: 40607, TRU: 84, NA: 0
## 
## ── Variable type:numeric ───────────────────────────────────────────────────────────────────────────────────────────────────
##         variable missing complete     n      mean      sd   p0    p25
##        barrels08       0    40691 40691  17.33      4.6   0.06  14.33
##       barrelsA08       0    40691 40691   0.22      1.14  0      0   
##        charge120       0    40691 40691   0         0     0      0   
##        charge240       0    40691 40691   0.037     0.54  0      0   
##       charge240b       0    40691 40691   0.0074    0.19  0      0   
##          city08U       0    40691 40691   5.74     11.22  0      0   
##         cityA08U       0    40691 40691   0.49      4.75  0      0   
##           cityCD       0    40691 40691   0.00046   0.039 0      0   
##            cityE       0    40691 40691   0.28      3.55  0      0   
##           cityUF       0    40691 40691   0.0014    0.027 0      0   
##  co2TailpipeAGpm       0    40691 40691  17.75     93.56  0      0   
##   co2TailpipeGpm       0    40691 40691 467.55    122.97  0    386.39
##          comb08U       0    40691 40691   6.42     11.95  0      0   
##         combA08U       0    40691 40691   0.53      4.76  0      0   
##            combE       0    40691 40691   0.29      3.61  0      0   
##       combinedCD       0    40691 40691   0.00036   0.034 0      0   
##       combinedUF       0    40691 40691   0.0014    0.027 0      0   
##            displ     175    40516 40691   3.3       1.36  0      2.2 
##       highway08U       0    40691 40691   7.6      13.52  0      0   
##      highwayA08U       0    40691 40691   0.6       4.93  0      0   
##        highwayCD       0    40691 40691   0.00024   0.029 0      0   
##         highwayE       0    40691 40691   0.3       3.7   0      0   
##        highwayUF       0    40691 40691   0.0013    0.026 0      0   
##        rangeCity       0    40691 40691   0.6      11.19  0      0   
##       rangeCityA       0    40691 40691   0.073     1.69  0      0   
##         rangeHwy       0    40691 40691   0.58     11.19  0      0   
##        rangeHwyA       0    40691 40691   0.067     1.52  0      0   
##            UCity       0    40691 40691  23.06     10.63  0     18.18
##           UCityA       0    40691 40691   0.82      6.88  0      0   
##         UHighway       0    40691 40691  34.2      10.88  0     27.79
##        UHighwayA       0    40691 40691   1.1       7.42  0      0   
##     p50    p75    p100     hist
##   16.48  19.39   47.09 ▁▁▇▅▁▁▁▁
##    0      0      18.31 ▇▁▁▁▁▁▁▁
##    0      0       0    ▁▁▁▇▁▁▁▁
##    0      0      13    ▇▁▁▁▁▁▁▁
##    0      0       8.5  ▇▁▁▁▁▁▁▁
##    0     13.29  150    ▇▁▁▁▁▁▁▁
##    0      0     145.08 ▇▁▁▁▁▁▁▁
##    0      0       5.35 ▇▁▁▁▁▁▁▁
##    0      0     122    ▇▁▁▁▁▁▁▁
##    0      0       0.9  ▇▁▁▁▁▁▁▁
##    0      0     713    ▇▁▁▁▁▁▁▁
##  444.35 522.76 1269.57 ▁▁▇▅▁▁▁▁
##    0     15.47  136    ▇▂▁▁▁▁▁▁
##    0      0     133.27 ▇▁▁▁▁▁▁▁
##    0      0     121    ▇▁▁▁▁▁▁▁
##    0      0       4.8  ▇▁▁▁▁▁▁▁
##    0      0       0.89 ▇▁▁▁▁▁▁▁
##    3      4.3     8.4  ▁▆▇▅▃▃▁▁
##    0     19.01  123.34 ▇▂▁▁▁▁▁▁
##    0      0     121.2  ▇▁▁▁▁▁▁▁
##    0      0       4.06 ▇▁▁▁▁▁▁▁
##    0      0     120    ▇▁▁▁▁▁▁▁
##    0      0       0.88 ▇▁▁▁▁▁▁▁
##    0      0     333.11 ▇▁▁▁▁▁▁▁
##    0      0     103.03 ▇▁▁▁▁▁▁▁
##    0      0     346.9  ▇▁▁▁▁▁▁▁
##    0      0      90.55 ▇▁▁▁▁▁▁▁
##   21.32  25.8   224.8  ▇▂▁▁▁▁▁▁
##    0      0     207.26 ▇▁▁▁▁▁▁▁
##   33.15  39     182.7  ▁▇▁▁▁▁▁▁
##    0      0     173.14 ▇▁▁▁▁▁▁▁</code></pre>
</div>
<div id="data-exploration" class="section level1">
<h1>Data Exploration</h1>
<p>Let’s start the data exploration by looking at how many vehicles were added in each year.
Before we start, I like to use a common theme for ggplot in the document, add that first.</p>
<pre class="r"><code># Global document theme
theme_glob &lt;- theme_bw(base_family=&quot;Helvetica&quot;, base_size = 12) +
    theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1), legend.direction = &quot;horizontal&quot;, legend.position = &quot;top&quot;)
theme_set(theme_glob)</code></pre>
<div id="vehicles-and-years" class="section level2">
<h2>Vehicles and Years</h2>
<p>How many models are released per year?</p>
<pre class="r"><code># Add some extra information for later use
vehicles &lt;- vehicles %&gt;% 
  mutate(fuelType_f = gsub(fuelType1, pattern = regex(&#39;.*Gasoline&#39;, ignore_case = TRUE), replacement = &#39;Gasoline&#39;))

current_model_year &lt;- max(vehicles$year)

vehicles %&gt;% 
  ggplot(aes(x=year)) +
  geom_bar( aes(fill = year), stat = &quot;count&quot;, show.legend = FALSE) + 
  labs(title = &quot;Models by Year&quot;, y = &quot;Count of models&quot;, x = &quot;Year&quot;) +
  scale_x_continuous(breaks =  seq( min(vehicles$year), max(vehicles$year), by = 2) )</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="vehicles-and-manufacturers" class="section level2">
<h2>Vehicles and Manufacturers</h2>
<p>How many manufacturers do we have?
We have 135 total number of manufacturers in our list. Here are the top 20.</p>
<pre class="r"><code>vehicles %&gt;% 
  count(make) %&gt;% 
  top_n(20, wt = n ) %&gt;% 
  

  ggplot(aes(x = reorder(make, n), y = n )) +
  geom_bar( aes(fill = make), stat = &quot;identity&quot;, show.legend = FALSE) + 
    labs(title = &quot;Top manufacturers by number of models&quot;, y = &quot;Count of models&quot;, x = &quot;Make&quot;) +
  coord_flip()</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>WTF, Chevrolet has close to 4000 models - this is not a real number because each manufacturer (make) has the same model coming back in a different year. We will need to identify truly unique models.</p>
<pre class="r"><code>vehicles %&gt;% 
  count(make, model) %&gt;% count(make) %&gt;% top_n(20, wt = n) %&gt;% 
  ggplot(aes(x = reorder(make, n), y = n )) +
  geom_bar( aes(fill = make), stat = &quot;identity&quot;, show.legend = FALSE) + 
    labs(title = &quot;Top manufacturers by number of models - adjusted for model year&quot;, y = &quot;Count of models&quot;, x = &quot;Make&quot;) +
  coord_flip() </code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>This looks a lot better - Mercedes and BMW are the most prolific manufacturers with over 300 models.</p>
</div>
</div>
<div id="fuel-economy" class="section level1">
<h1>Fuel Economy</h1>
<p>Let’s dive into an analysis of fuel economy and see how things have changed over the year, clearly economy has gone up but seems to have suffered recently. We will try and investigate why that happened.
The other issue is that this data contains other types of alternative fuels, we need to adjust for different fuel types.</p>
<pre class="r"><code>vehicles %&gt;% 
  group_by(year) %&gt;% 
  summarise(avgMPG = mean(comb08)) %&gt;% 
  ggplot(aes(x=year, y = avgMPG)) +
  geom_line(aes(color = avgMPG), alpha = 0.5, show.legend = FALSE) +
  geom_point(aes(color = avgMPG), show.legend = FALSE) +
  scale_x_continuous(breaks =  seq( min(vehicles$year), max(vehicles$year), by = 2) ) +
  scale_color_gradientn(colours=c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;)) +
  labs(title = &quot;Average fuel economy over the years&quot;, y = &quot;Avg MPG&quot;, x = &quot;Year&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div id="by-fuel-type" class="section level2">
<h2>By Fuel type</h2>
<p>Let’s look at the vehicles by the type of fuel - we had previously added an additional column that describes the different fuel types for these vehicles.
Clearly, electric powered vehicles have an edge over other forms of fuel.</p>
<pre class="r"><code>vehicles %&gt;% 
  group_by(year, fuelType_f) %&gt;% 
  summarise(avgMPG = mean(comb08)) %&gt;% 
  ggplot(aes(x=year, y = avgMPG)) +
  geom_line(aes(color = avgMPG), alpha = 0.7, show.legend = FALSE) +
  geom_point(aes(color = avgMPG), alpha = 0.5, show.legend = FALSE) +
  scale_x_continuous(breaks =  seq( min(vehicles$year), max(vehicles$year), by = 2) ) +
  scale_color_gradientn(colours=c(&quot;red&quot;, &quot;green&quot;)) +
  labs(title = &quot;Average fuel economy over the years by fuel type&quot;, y = &quot;Avg MPG&quot;, x = &quot;Year&quot;) +
  facet_wrap(~ fuelType_f, scales = &quot;free&quot;) +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1), legend.direction = &quot;horizontal&quot;, legend.position = &quot;top&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="by-vehicle-class" class="section level2">
<h2>By Vehicle class</h2>
<p>For this we will limit ourselves to Gasoline fueled vehicles since not all vehicles are made equal, let’s also try and see how different vehicle classes score.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &#39;Gasoline&#39;) %&gt;% 
  group_by(year, VClass) %&gt;% 
  summarise(avgMPG = mean(comb08)) %&gt;% 
  ggplot() +
  ggridges::geom_density_ridges(aes(x = avgMPG, y = as.factor(VClass), fill = VClass), rel_min_height = 0.001, scale = 1, show.legend = FALSE) +
  labs(title = &quot;Fuel economy density by Vehicle class&quot;, y = &quot;Vehicle Class&quot;, x = &quot;Avg MPG&quot;) </code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>It’s clear that we are comparing apples to oranges - let’s roll up the data to create some vehicle classes and try this again.</p>
<pre class="r"><code>vehicles &lt;- vehicles %&gt;% 
  mutate(VClass_f = case_when(str_detect(VClass, pattern = &quot;Trucks&quot;) ~ &quot;Pickup Trucks&quot;,
                              str_detect(VClass, pattern = &quot;Cars|Wagons&quot;) ~ &quot;Cars&quot;,
                              str_detect(VClass, pattern = &quot;Sport&quot;) ~ &quot;SUV&quot;,
                              str_detect(VClass, pattern = regex(&quot;van&quot;, ignore_case = TRUE) ) ~ &quot;Vans&quot;, 
                              TRUE ~ &quot;Other&quot;))</code></pre>
<p>We can start to see the range of mpg averages over the different vehicle classes. This graph represents the density (relative proportions) of mpg ratings in each vehicle class.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &#39;Gasoline&#39; , fuelType2 != &quot;Electricity&quot;) %&gt;% 
  group_by( VClass) %&gt;% 
  mutate(avgMPG = mean(comb08)) %&gt;% ungroup() %&gt;% 
  ggplot(aes(x = avgMPG, y = as.factor(VClass_f))) +
  geom_density_ridges(aes(fill = VClass_f), rel_min_height = 0.001, show.legend = FALSE, alpha = 0.7) +
  labs(title = &quot;Fuel economy density by Vehicle class&quot;, y = &quot;Vehicle Class&quot;, x = &quot;Avg MPG&quot;) </code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Let’s see what kind of engine displacements we are talking about in this set. It’s clear that there is a correlation between displacement and fuel economy. We will explore that later.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &#39;Gasoline&#39;, fuelType2 != &quot;Electricity&quot;) %&gt;% 
  group_by( VClass) %&gt;% 
  mutate(avgDispl = mean(displ)) %&gt;% ungroup() %&gt;% 
  ggplot(aes(x = avgDispl, y = as.factor(VClass_f))) +
  geom_density_ridges(aes(fill = VClass_f), rel_min_height = 0.001, show.legend = FALSE, alpha = 0.7) +
  labs(title = &quot;Engine displacement density by Vehicle class&quot;, y = &quot;Vehicle Class&quot;, x = &quot;Engine displacement (litres)&quot;) +
  scale_x_continuous(breaks = seq(1.6,6, by = 0.4))</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="engine-displacement-vs-fuel-economy" class="section level2">
<h2>Engine displacement vs fuel economy</h2>
<ul>
<li>Not including plug-in hybrids.</li>
</ul>
<pre class="r"><code>vehicles %&gt;%  
  filter(fuelType_f == &#39;Gasoline&#39; , fuelType2 != &quot;Electricity&quot;, year == current_model_year) %&gt;% 
  ggplot(aes(y=comb08, x = displ)) + 
  geom_point(aes(color = VClass_f, group = VClass_f), position = &quot;jitter&quot;,  na.rm = TRUE ) +
  scale_color_brewer(palette = &quot;Set1&quot;) + 
  labs(title = &quot;Engine displacement vs Fuel Economy&quot;, y = &quot;Avg MPG&quot;, x = &quot;Engine displacement (litres)&quot;) +
  guides(color = guide_legend(title=&quot;Vehicle class&quot;))  </code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Let’s also see how has economy improved over the years for each of these segments; cars and Vans have had the most improvement over time and SUVs are a relatively new segment and were only defined near 2000.
The second chart shows the relative numbers of models in each class.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &#39;Gasoline&#39;,VClass_f != &quot;Other&quot;) %&gt;% 
  group_by(year, VClass_f) %&gt;% 
  mutate(avgMPG = mean(comb08)) %&gt;% 
  ungroup() %&gt;% 
  ggplot(aes(x = year, y = avgMPG)) +
  geom_point(aes(color = VClass_f), alpha = 0.1) +
  geom_smooth(aes(color = VClass_f))  +
  labs(title = &quot;Fuel economy by Vehicle class over time&quot;, y = &quot;Avg MPG&quot;, x = &quot;Year&quot;) +
  guides(color = guide_legend(title=&quot;Vehicle class&quot;)) +
  scale_color_brewer(palette = &quot;Set1&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &#39;Gasoline&#39;,VClass_f != &quot;Other&quot;) %&gt;% 
  group_by(year, VClass_f) %&gt;% 
  ungroup() %&gt;% 
  ggplot(aes(x = year, y = ..count..)) +
  geom_area(aes(fill = VClass_f), stat= &quot;bin&quot;, position = &quot;fill&quot;, binwidth = 1) +
  labs(title = &quot;Percentage of models by Vehicle Class (Gasoline only)&quot;, y = &quot;Class size&quot;, x = &quot;Year&quot;) +
  guides(fill = guide_legend(title=&quot;Vehicle class&quot;)) +
  scale_y_continuous(labels = scales::percent, breaks = seq(0,1, by = .25)) +
  scale_fill_brewer(palette = &quot;Set1&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="by-manufacturers" class="section level2">
<h2>By manufacturers</h2>
<p>Are there manufacturers that have done a better job compared to the others? Let’s start by seeing what the range of mileage is in our data set, still only looking at the Gasoline segment only. Let’s do this for the last three model years only.
We can see a wide swing in range between different models from a manufacturer. Hyundai seems quite curious with a range from 17 to 58 mpg, we’ll try and explore that further.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &#39;Gasoline&#39;,VClass_f == &quot;Cars&quot;, between(year, current_model_year-3, current_model_year)) %&gt;% 
  group_by(make) %&gt;% 
  summarise(min = min(comb08), max = max(comb08)) %&gt;% 
  
  ggplot() +
    geom_point(aes(x = reorder(make, -(max - min), order = TRUE ), y = max, color = make), size = 2, show.legend = FALSE)  +
    geom_point(aes(x = make, y = min, color = make), size = 1, show.legend = FALSE) +
    geom_segment(aes(x = make, xend = make, y = min, yend = max, color = make), size = 0.2, show.legend = FALSE) +
    coord_flip() +
    scale_y_continuous(breaks = seq(10,60, by = 5)) +
    labs(title = paste0(&quot;Range of Avg MPG (&quot;, current_model_year -3, &quot;-&quot;, current_model_year, &quot; models)&quot;), x = &quot;Make&quot;, y = &quot;Min &lt;--MPG --&gt; Max&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="most-improved" class="section level2">
<h2>Most Improved</h2>
<p>My goal here is to find the most fuel efficient vehicles. There are many ways to slice this data to find the best vehicles; by make, by vehicle class, by fuel type, by engine size, seating capacity and many other ways. One interesting metric would be to see which models have the most improved efficiency over time. We will find vehicles that are still being sold in the current model year and have been around for at least three model years. Once more, we’ll limit our set to Gasoline powered vehicles only. The chart below shows the most improved and ones that have gotten much worse over the years.</p>
<pre class="r"><code># Find models that are still being sold in the current model year
vehicles %&gt;% 
  filter(year == 2019, fuelType_f == &quot;Gasoline&quot;, VClass_f == &quot;Cars&quot;) %&gt;% 
  distinct(make, model, fuelType_f, trany, fuelType, cylinders) %&gt;% 
  inner_join(vehicles, by = c(&quot;make&quot;, &quot;model&quot;, &quot;trany&quot;, &quot;fuelType&quot;, &quot;cylinders&quot;)) %&gt;% 
  group_by(make, model, trany, fuelType, cylinders) %&gt;% 
  summarise(years_sold = n_distinct(year), mpg_start = comb08[which.min(year)], mpg_end = comb08[which.max(year)], mpg_range = mpg_end - mpg_start, min_year = year[which.min(year)], max_year = year[which.max(year)]) %&gt;% 
  ungroup() %&gt;% 
  mutate(avg_range = mean(mpg_range), sd_range = sd(mpg_range), shift = if_else(mpg_range &gt; 0, &quot;Better&quot;, &quot;Worse&quot;)) %&gt;% 
  filter(years_sold &gt; 2, mpg_range &gt; 3 * sd_range | mpg_range &lt; -2* sd_range) %&gt;% 
  
  ggplot() +
    geom_point(aes(x = reorder(model, -mpg_start), y = mpg_end, color = make), size = 2, show.legend = FALSE) +
    geom_point(aes(x = model, y = mpg_start, color = make), size = 1 , show.legend = FALSE) +
    geom_segment(aes(x = model, xend = model, y = mpg_start, yend = if_else(shift == &quot;Better&quot;, mpg_end -0.65, mpg_end + 0.65), color = make), linejoin = &quot;mitre&quot;, arrow = arrow(length = unit(0.03, &quot;npc&quot;), type = &quot;closed&quot;), size = 0.2, show.legend = FALSE) +
    geom_text_repel(aes(x = model, y = mpg_start, label = min_year), size = 2.5 ) +
    scale_y_continuous(breaks = seq(10,60, by = 5)) +
    labs(title =&quot;Change in Avg MPG&quot;, x = &quot;Model&quot;, y = &quot;MPG&quot;) +
    facet_wrap(~shift, scales = &quot;free&quot;) +
  coord_flip()</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="most-fuel-efficient-models-in-class" class="section level2">
<h2>Most fuel efficient Models in class</h2>
<p>Let’s look at the real fuel sippers by class of vehicle - we’ll start by the larger class and then refine further into smaller sub-classes. All these are the most recent models and all are Gasoline powered. We will look at other fuel types separately.</p>
<div id="by-vehicle-class-1" class="section level3">
<h3>By Vehicle class</h3>
<pre class="r"><code>vehicles %&gt;%
  filter(year == current_model_year, fuelType_f == &quot;Gasoline&quot;) %&gt;% 
  top_n(20, wt = comb08) %&gt;% 
  ggplot() +
  geom_point(aes(x = reorder(model, comb08), y = comb08, color = make), size = 3) +
  
  coord_flip() +
  labs(title =&quot;Highest MPG overall (combined)&quot;, x = &quot;Model&quot;, y = &quot;MPG&quot;) +
  scale_y_continuous(breaks = seq(30,60, by = 2)) +
  scale_color_brewer(palette = &quot;Dark2&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
<div id="by-vehicle-type" class="section level3">
<h3>By Vehicle type</h3>
<p>Since SUVs and Cars are the biggest segments - let’s limit to those.
Only look for full gasoline or hybrid vehicles, exclude any plug in hybrids</p>
<pre class="r"><code>vehicles %&gt;%
  filter(year == current_model_year, fuelType_f == &quot;Gasoline&quot;, fuelType2 != &quot;Electricity&quot;, VClass_f %in% c(&quot;Cars&quot;, &quot;SUV&quot;)) %&gt;% 
  group_by(VClass_f) %&gt;% 
  distinct(model, .keep_all = TRUE) %&gt;% 
  top_n(15, wt = comb08) %&gt;% 
  ggplot() +
  geom_point(aes(x = reorder(model, comb08), y = comb08, color = make), size = 3, show.legend = FALSE) +
  
  coord_flip() +
  labs(title =&quot;Highest MPG overall (combined)&quot;, x = &quot;Model&quot;, y = &quot;MPG&quot;) +
  scale_y_continuous(breaks = seq(30,60, by = 2)) +
  #scale_color_brewer(palette = &quot;Dark2&quot;) +
  facet_wrap(~ VClass_f, scales =&quot;free&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>Before we move on, let’s take a quick look at the worst overall MPG</p>
</div>
<div id="worst-mpg" class="section level3">
<h3>Worst MPG</h3>
<p>Gasoline Cars - current model year
Looking at this, at least Rolls Royce is constiently bad across most of it’s models and Grand Cherokee Trackhawk is a 800 bhp, 0 - 60 in less than 3 second beast.</p>
<pre class="r"><code>vehicles %&gt;%
  filter(year == current_model_year, fuelType_f == &quot;Gasoline&quot;, fuelType2 != &quot;Electricity&quot;, VClass_f %in% c(&quot;Cars&quot;, &quot;SUV&quot;)) %&gt;% 
  group_by(VClass_f) %&gt;% 
  distinct(model, .keep_all = TRUE) %&gt;% 
  top_n(5, wt = -comb08) %&gt;% 
  ggplot() +
  geom_point(aes(x = reorder(model, comb08), y = comb08, color = make), size = 3, show.legend = FALSE) +
  
  coord_flip() +
  labs(title =&quot;Lowest MPG overall (combined)&quot;, x = &quot;Model&quot;, y = &quot;MPG&quot;) +
  scale_y_continuous(breaks = seq(0,20, by = 2)) +
  scale_color_brewer(palette = &quot;Dark2&quot;) +
  facet_wrap(~ VClass_f, scales =&quot;free&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
</div>
</div>
<div id="electric-vehicles" class="section level2">
<h2>Electric Vehicles</h2>
<p>Before looking at the data, a quick look a the number of models for each fuel type</p>
<div id="different-fuel-types" class="section level3">
<h3>Different Fuel Types</h3>
<ul>
<li>Current model year only</li>
</ul>
<pre class="r"><code>vehicles %&gt;% 
  filter(year == current_model_year, VClass_f != &quot;Other&quot;) %&gt;% 
  group_by(fuelType_f) %&gt;% 
  ggplot(aes( x = fuelType_f)) +
  geom_bar(aes(fill = fuelType_f)) +
  scale_fill_brewer(palette = &quot;Set1&quot;) +
  facet_grid(~ VClass_f, scales = &quot;free&quot;) +
  labs(title = &quot;Count of models by fuel type - Current model year&quot;, y = &quot;Class size&quot;, x = &quot;Fuel Type&quot;) +
  guides(fill = guide_legend(title=&quot;Vehicle class&quot;)) +
  geom_label(stat = &quot;count&quot;, aes(label = ..count.., y = ..count..)) +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1), legend.direction = &quot;horizontal&quot;, legend.position = &quot;top&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>While EVs are still an extremely small segment of the total passenger vehicle segment, they are certainly starting to be noticed.
Let’s look at the electric vehicle stats before we move to some machine learning.</p>
</div>
<div id="electric-effciency" class="section level3">
<h3>Electric Effciency</h3>
<p>We’ll look at the transitional electric vehicles first - these are also called the plug-in electric vehicles where they retain an IC engine along with some battery.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType2 == &quot;Electricity&quot;, year == current_model_year , VClass_f %in% c(&quot;Cars&quot;)) %&gt;% 
  group_by(VClass_f) %&gt;% 
  distinct(model, .keep_all = TRUE) %&gt;% 
  top_n(15, wt = comb08) %&gt;% 
  ggplot() +
  geom_point(aes(x = reorder(model, comb08), y = comb08, color = make), size = 3) +
  
  coord_flip() +
  labs(title =&quot;Highest MPG overall (Plug in hybrids)&quot;, x = &quot;Model&quot;, y = &quot;MPG&quot;) +
  scale_y_continuous(breaks = seq(30,60, by = 2)) +
  scale_color_brewer(palette = &quot;Dark2&quot;) +
  facet_wrap(~ VClass_f, scales =&quot;free&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="fully-electric" class="section level3">
<h3>Fully electric</h3>
<p>Hyundai seems to have taken the top spots in both the Cars and SUV segments and Tesla is doing well in both segments.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &quot;Electricity&quot;,  VClass_f %in% c(&quot;Cars&quot;, &quot;SUV&quot;)) %&gt;% 
  group_by(VClass_f) %&gt;% 
  distinct(model, .keep_all = TRUE) %&gt;% 
  top_n(10, wt = comb08) %&gt;% 
  ggplot() +
  geom_point(aes(x = reorder(model, comb08), y = comb08, color = make), size = 3) +
  
  coord_flip() +
  labs(title =&quot;Highest MPGe overall (Full electric)&quot;, x = &quot;Model&quot;, y = &quot;MPG&quot;) +
  facet_wrap(~ VClass_f, scales =&quot;free&quot;) +
  scale_x_discrete(labels = function(x) abbreviate(x, minlength = 11L))</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>
<div id="fully-electric-range" class="section level3">
<h3>Fully electric range</h3>
<p>What kind of range do we get at the top of the heap and it’s clear that Tesla has done a phenomenal job both in efficiency and range.</p>
<pre class="r"><code>vehicles %&gt;% 
  filter(fuelType_f == &quot;Electricity&quot;, VClass_f %in% c(&quot;Cars&quot;, &quot;SUV&quot;)) %&gt;% 
  group_by(VClass_f) %&gt;% 
  distinct(model, .keep_all = TRUE) %&gt;%
  top_n(10, wt = range) %&gt;% 
  ggplot() +
  geom_point(aes(x = reorder(model, range), y = range, color = make), size = 3) +
  
  coord_flip() +
  labs(title =&quot;Longest Range (Full electric)&quot;, x = &quot;Model&quot;, y = &quot;Range (miles)&quot;) +
  facet_wrap(~ VClass_f, scales =&quot;free&quot;) +
  scale_x_discrete(labels = function(x) abbreviate(x, minlength = 11L))</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="machine-learning" class="section level1">
<h1>Machine Learning</h1>
<p>This is a great dataset to try and dig into machine learning.
Start with some clustering</p>
<div id="clustering" class="section level2">
<h2>Clustering</h2>
<p>Clustering is process of grouping together similar items. In this case we want to see which vehicles are most like another and form groups.</p>
<p>Before we get into the actual clustering, we’ll try and identify which variables are related and which are ones that are important.
We’ll use a technique called Principal Component Analysis. Let’s take a look at what the data looks like; some of these are clearly propotinally and linearly related, while others have some more spread out variations.</p>
<pre class="r"><code>data &lt;- vehicles %&gt;% 
  filter(year == current_model_year, fuelType_f == &quot;Gasoline&quot;, fuelType2 != &quot;Electricity&quot;,  VClass_f == &quot;Cars&quot;) %&gt;% 
  distinct( model,  trany,  cylinders, .keep_all = TRUE) %&gt;% 
  mutate(model = paste(model, trany, cylinders, sep = &quot;-&quot;)) %&gt;% 
  select(model, barrels08, co2TailpipeGpm, comb08, cylinders, displ, fuelCost08, highway08, city08, youSaveSpend)
 
data &lt;- na.omit(data)
rownames(data) &lt;- data$model</code></pre>
<pre><code>## Warning: Setting row names on a tibble is deprecated.</code></pre>
<pre class="r"><code>data &lt;- select(data, -model)
data &lt;- as.data.frame(data)
plot(data)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>Before we run the principal components, we’ll scale the data to normalize it - that will ensure that the data ranges are normalized and one single element does not have a large range and does not dominate.</p>
<pre class="r"><code>df &lt;- scale(data)
pc &lt;- princomp(df)
plot(pc)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<pre class="r"><code>plot(pc, type=&#39;l&#39;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-27-2.png" width="672" /></p>
<pre class="r"><code>summary(pc)</code></pre>
<pre><code>## Importance of components:
##                          Comp.1     Comp.2     Comp.3    Comp.4
## Standard deviation     2.812022 0.83975270 0.44481614 0.2540906
## Proportion of Variance 0.880327 0.07850718 0.02202762 0.0071876
## Cumulative Proportion  0.880327 0.95883416 0.98086178 0.9880494
##                             Comp.5      Comp.6       Comp.7       Comp.8
## Standard deviation     0.249338199 0.203219368 0.0560124163 2.721122e-02
## Proportion of Variance 0.006921244 0.004597659 0.0003492812 8.243325e-05
## Cumulative Proportion  0.994970627 0.999568286 0.9999175667 1.000000e+00
##                        Comp.9
## Standard deviation          0
## Proportion of Variance      0
## Cumulative Proportion       1</code></pre>
<p>Given these charts, we will use the first three components from this data since most variation is present in these three.
We have now simplified the data into fewer dimensions that have the most variance and are therefore the most important in deciding clusters.
The columns we have selected are barrels08, co2TailpipeGpm, comb08</p>
<pre class="r"><code>pc &lt;- prcomp(df)
comp &lt;- data.frame(pc$x[,1:3])
# Plot
plot(comp, pch=16, col=rgb(0,0,0,0.5))</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<div id="k-means" class="section level3">
<h3>K-means</h3>
<p>The k means algorithm tries to create groups of observatons by minimizing the distance between the observations, the other question to answer as we do this is to find out the optimal number of clusters.
A second thing to note is that since all our data has many different ranges, to compare standard measures, we’ll rescale all the data after removing all non-numeric data.</p>
<p>One of the first things we need to identify is an optimum number of clusters we should seek.
Here I used the code from <a href="http://www.statmethods.net/advstats/cluster.html">R in Action</a>:</p>
<pre class="r"><code># Determine number of clusters
wss &lt;- (nrow(comp)-1)*sum(apply(comp,2,var))
for (i in 2:15) wss[i] &lt;- sum(kmeans(comp,
                                     centers=i)$withinss)
plot(1:15, wss, type=&quot;b&quot;, xlab=&quot;Number of Clusters&quot;,
     ylab=&quot;Within groups sum of squares&quot;)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>Based on the scree plot above, let’s go with 5 clusters within this data.</p>
<pre class="r"><code># Only do this for gasoline cars initially
set.seed(1215)
k &lt;- kmeans(data, 5, nstart=25, iter.max=1000)
palette(alpha(brewer.pal(9,&#39;Set1&#39;), 0.5))
plot(comp, col=k$clust, pch=16)</code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>Finally, we can identify the vehicles that have been clustered together.</p>
<pre class="r"><code>clust &lt;- names(table(k$clust))

# First cluster

map(clust, function(x) {
  row.names(data[k$clust==x,])
})</code></pre>
<pre><code>## [[1]]
##   [1] &quot;TLX FWD A-SPEC-Automatic (AM-S8)-4&quot;             
##   [2] &quot;Cooper Convertible-Automatic (S6)-3&quot;            
##   [3] &quot;Cooper Convertible-Manual 6-spd-3&quot;              
##   [4] &quot;Cooper S Convertible-Automatic (S6)-4&quot;          
##   [5] &quot;Cooper S Convertible-Manual 6-spd-4&quot;            
##   [6] &quot;John Cooper Works Convertible-Automatic (S6)-4&quot; 
##   [7] &quot;430i Convertible-Automatic (S8)-4&quot;              
##   [8] &quot;430i xDrive Convertible-Automatic (S8)-4&quot;       
##   [9] &quot;Cooper Hardtop 2 door-Automatic (S6)-3&quot;         
##  [10] &quot;Cooper Hardtop 2 door-Manual 6-spd-3&quot;           
##  [11] &quot;Cooper Hardtop 4 door-Automatic (S6)-3&quot;         
##  [12] &quot;Cooper Hardtop 4 door-Manual 6-spd-3&quot;           
##  [13] &quot;Cooper S Hardtop 2 door-Automatic (S6)-4&quot;       
##  [14] &quot;Cooper S Hardtop 2 door-Manual 6-spd-4&quot;         
##  [15] &quot;Cooper S Hardtop 4 door-Automatic (S6)-4&quot;       
##  [16] &quot;Cooper S Hardtop 4 door-Manual 6-spd-4&quot;         
##  [17] &quot;John Cooper Works Hardtop-Automatic (S6)-4&quot;     
##  [18] &quot;John Cooper Works Hardtop-Manual 6-spd-4&quot;       
##  [19] &quot;TLX FWD-Automatic (AM-S8)-4&quot;                    
##  [20] &quot;430i Coupe-Automatic (S8)-4&quot;                    
##  [21] &quot;430i xDrive Coupe-Automatic (S8)-4&quot;             
##  [22] &quot;430i Gran Coupe-Automatic (S8)-4&quot;               
##  [23] &quot;430i xDrive Gran Coupe-Automatic (S8)-4&quot;        
##  [24] &quot;530i-Automatic (S8)-4&quot;                          
##  [25] &quot;Cooper Clubman-Automatic (S6)-3&quot;                
##  [26] &quot;Cooper Clubman-Manual 6-spd-3&quot;                  
##  [27] &quot;Cooper Countryman-Automatic (S6)-3&quot;             
##  [28] &quot;Cooper Countryman-Manual 6-spd-3&quot;               
##  [29] &quot;Cooper Clubman All4-Automatic (S8)-3&quot;           
##  [30] &quot;Cooper Clubman All4-Manual 6-spd-3&quot;             
##  [31] &quot;Cooper Countryman All4-Manual 6-spd-3&quot;          
##  [32] &quot;Cooper S Clubman-Automatic (S8)-4&quot;              
##  [33] &quot;Cooper S Countryman-Automatic (S8)-4&quot;           
##  [34] &quot;Cooper S Countryman All4-Automatic (S8)-4&quot;      
##  [35] &quot;Cooper S Clubman All4-Automatic (S8)-4&quot;         
##  [36] &quot;John Cooper Works Clubman All4-Automatic (S8)-4&quot;
##  [37] &quot;XE-Automatic (S8)-4&quot;                            
##  [38] &quot;XE AWD-Automatic (S8)-4&quot;                        
##  [39] &quot;XF-Automatic (S8)-4&quot;                            
##  [40] &quot;XF AWD-Automatic (S8)-4&quot;                        
##  [41] &quot;Avalon-Automatic (S8)-6&quot;                        
##  [42] &quot;Avalon XLE-Automatic (S8)-6&quot;                    
##  [43] &quot;Cadenza-Automatic (S8)-6&quot;                       
##  [44] &quot;Impreza Sport 4-Door-Manual 5-spd-4&quot;            
##  [45] &quot;S90 AWD-Automatic (S8)-4&quot;                       
##  [46] &quot;XTS-Automatic (S6)-6&quot;                           
##  [47] &quot;Impala-Automatic (S6)-6&quot;                        
##  [48] &quot;Impreza 5-Door-Manual 5-spd-4&quot;                  
##  [49] &quot;Impreza Sport 5-Door-Manual 5-spd-4&quot;            
##  [50] &quot;S60 FWD-Automatic (S8)-4&quot;                       
##  [51] &quot;LaCrosse-Automatic (S9)-6&quot;                      
##  [52] &quot;S90 FWD-Automatic (S8)-4&quot;                       
##  [53] &quot;Impala-Automatic (S6)-4&quot;                        
##  [54] &quot;V60 FWD-Automatic (S8)-4&quot;                       
##  [55] &quot;V90 FWD-Automatic (S8)-4&quot;                       
##  [56] &quot;Mustang-Manual 6-spd-4&quot;                         
##  [57] &quot;Mustang Convertible-Manual 6-spd-4&quot;             
##  [58] &quot;Mustang-Automatic (S10)-4&quot;                      
##  [59] &quot;Mustang Convertible-Automatic (S10)-4&quot;          
##  [60] &quot;Mustang Performance Package-Manual 6-spd-4&quot;     
##  [61] &quot;Mustang Performance Package-Automatic (S10)-4&quot;  
##  [62] &quot;Optima-Automatic (S6)-4&quot;                        
##  [63] &quot;RLX Hybrid-Automatic (AM-S7)-6&quot;                 
##  [64] &quot;Legacy AWD-Automatic (AV-S6)-6&quot;                 
##  [65] &quot;ATS-Automatic (S8)-6&quot;                           
##  [66] &quot;ATS AWD-Automatic (S8)-6&quot;                       
##  [67] &quot;LaCrosse AWD-Automatic (S9)-6&quot;                  
##  [68] &quot;Regal AWD-Automatic (S9)-6&quot;                     
##  [69] &quot;CTS AWD-Automatic (S8)-6&quot;                       
##  [70] &quot;230i Coupe-Automatic (S8)-4&quot;                    
##  [71] &quot;230i xDrive Coupe-Automatic (S8)-4&quot;             
##  [72] &quot;230i Convertible-Automatic (S8)-4&quot;              
##  [73] &quot;230i xDrive Convertible-Automatic (S8)-4&quot;       
##  [74] &quot;Camaro-Automatic (S8)-6&quot;                        
##  [75] &quot;530i xDrive-Automatic (S8)-4&quot;                   
##  [76] &quot;330i xDrive Gran Turismo-Automatic (S8)-4&quot;      
##  [77] &quot;330i xDrive Sports Wagon-Automatic (S8)-4&quot;      
##  [78] &quot;86-Automatic (S6)-4&quot;                            
##  [79] &quot;CLA250 4matic-Automatic (AM7)-4&quot;                
##  [80] &quot;CLA250-Automatic (AM7)-4&quot;                       
##  [81] &quot;Sonata-Automatic (S8)-4&quot;                        
##  [82] &quot;BRZ-Automatic (S6)-4&quot;                           
##  [83] &quot;Malibu-Automatic 9-spd-4&quot;                       
##  [84] &quot;Sentra Nismo-Manual 6-spd-4&quot;                    
##  [85] &quot;Sentra-Automatic (AV-S7)-4&quot;                     
##  [86] &quot;Sentra Nismo-Automatic (AV-S7)-4&quot;               
##  [87] &quot;Challenger-Automatic 8-spd-6&quot;                   
##  [88] &quot;Challenger GT-Automatic 8-spd-6&quot;                
##  [89] &quot;Camry-Automatic (S8)-6&quot;                         
##  [90] &quot;Camry XSE-Automatic (S8)-6&quot;                     
##  [91] &quot;300-Automatic 8-spd-6&quot;                          
##  [92] &quot;300 AWD-Automatic 8-spd-6&quot;                      
##  [93] &quot;Charger-Automatic 8-spd-6&quot;                      
##  [94] &quot;Charger AWD-Automatic 8-spd-6&quot;                  
##  [95] &quot;AMG CLA45 4matic-Automatic (AM7)-4&quot;             
##  [96] &quot;Giulia-Automatic 8-spd-4&quot;                       
##  [97] &quot;Giulia AWD-Automatic 8-spd-4&quot;                   
##  [98] &quot;Veloster N-Manual 6-spd-4&quot;                      
##  [99] &quot;Regal-Automatic (S9)-4&quot;                         
## [100] &quot;Fusion FWD-Automatic 6-spd-4&quot;                   
## [101] &quot;Fusion AWD-Automatic (S6)-4&quot;                    
## [102] &quot;ES 350-Automatic (S8)-6&quot;                        
## [103] &quot;ES 350 F Sport-Automatic (S8)-6&quot;                
## [104] &quot;MKZ AWD-Automatic (S6)-4&quot;                       
## [105] &quot;MKZ FWD-Automatic (S6)-4&quot;                       
## [106] &quot;MKZ FWD-Automatic (S6)-6&quot;                       
## [107] &quot;C300 4matic-Automatic 9-spd-4&quot;                  
## [108] &quot;C300-Automatic 9-spd-4&quot;                         
## [109] &quot;CT6 AWD-Automatic (S10)-6&quot;                      
## [110] &quot;CT6-Automatic (S10)-4&quot;                          
## [111] &quot;Taurus FWD-Automatic (S6)-6&quot;                    
## [112] &quot;Taurus FWD FFV-Automatic (S6)-6&quot;                
## [113] &quot;LC 500h-Automatic (AV-S10)-6&quot;                   
## [114] &quot;ILX-Automatic (AM-S8)-4&quot;                        
## [115] &quot;Civic 2Dr-Manual 6-spd-4&quot;                       
## [116] &quot;Civic 4Dr-Manual 6-spd-4&quot;                       
## [117] &quot;A5 quattro-Automatic (AM-S7)-4&quot;                 
## [118] &quot;A5 Cabriolet quattro-Automatic (AM-S7)-4&quot;       
## [119] &quot;A4 quattro-Automatic (AM-S7)-4&quot;                 
## [120] &quot;A5 Sportback quattro-Automatic (AM-S7)-4&quot;       
## [121] &quot;Accord 2.0T Sport/Touring-Automatic 10-spd-4&quot;   
## [122] &quot;LS 500h-Automatic (AV-S10)-6&quot;                   
## [123] &quot;LS 500h AWD-Automatic (AV-S10)-6&quot;               
## [124] &quot;GS 300-Automatic (S8)-4&quot;                        
## [125] &quot;Elantra GT-Manual 6-spd-4&quot;                      
## [126] &quot;Continental  FWD-Automatic (S6)-6&quot;              
## [127] &quot;CLS450-Automatic 9-spd-6&quot;                       
## [128] &quot;CLS450 4matic-Automatic 9-spd-6&quot;                
## 
## [[2]]
##   [1] &quot;G70 RWD-Automatic (S8)-6&quot;                         
##   [2] &quot;G70 AWD-Automatic (S8)-4&quot;                         
##   [3] &quot;G70 RWD-Automatic (S8)-4&quot;                         
##   [4] &quot;G70 RWD-Manual 6-spd-4&quot;                           
##   [5] &quot;TLX FWD A-SPEC-Automatic (S9)-6&quot;                  
##   [6] &quot;TLX AWD-Automatic (S9)-6&quot;                         
##   [7] &quot;TLX AWD A-SPEC-Automatic (S9)-6&quot;                  
##   [8] &quot;John Cooper Works Convertible-Manual 6-spd-4&quot;     
##   [9] &quot;440i Convertible-Automatic (S8)-6&quot;                
##  [10] &quot;440i xDrive Convertible-Automatic (S8)-6&quot;         
##  [11] &quot;TLX FWD-Automatic (S9)-6&quot;                         
##  [12] &quot;430i Coupe-Manual 6-spd-4&quot;                        
##  [13] &quot;440i Coupe-Automatic (S8)-6&quot;                      
##  [14] &quot;440i Coupe-Manual 6-spd-6&quot;                        
##  [15] &quot;440i xDrive Coupe-Automatic (S8)-6&quot;               
##  [16] &quot;440i xDrive Coupe-Manual 6-spd-6&quot;                 
##  [17] &quot;440i Gran Coupe-Automatic (S8)-6&quot;                 
##  [18] &quot;440i xDrive Gran Coupe-Automatic (S8)-6&quot;          
##  [19] &quot;640i Gran Coupe-Automatic (S8)-6&quot;                 
##  [20] &quot;640i xDrive Gran Coupe-Automatic (S8)-6&quot;          
##  [21] &quot;650i Gran Coupe-Automatic (S8)-8&quot;                 
##  [22] &quot;Q70-Automatic (S7)-6&quot;                             
##  [23] &quot;Cooper Countryman All4-Automatic (S8)-3&quot;          
##  [24] &quot;Cooper S Clubman-Manual 6-spd-4&quot;                  
##  [25] &quot;Cooper S Countryman All4-Manual 6-spd-4&quot;          
##  [26] &quot;Cooper S Clubman All4-Manual 6-spd-4&quot;             
##  [27] &quot;John Cooper Works Clubman All4-Manual 6-spd-4&quot;    
##  [28] &quot;JCW Countryman All4-Manual 6-spd-4&quot;               
##  [29] &quot;740i-Automatic (S8)-6&quot;                            
##  [30] &quot;740i xDrive-Automatic (S8)-6&quot;                     
##  [31] &quot;750i-Automatic (S8)-8&quot;                            
##  [32] &quot;JCW Countryman All4-Automatic (S8)-4&quot;             
##  [33] &quot;WRX-Manual 6-spd-4&quot;                               
##  [34] &quot;WRX-Automatic (AV-S8)-4&quot;                          
##  [35] &quot;911 Carrera-Automatic (AM-S7)-6&quot;                  
##  [36] &quot;911 Carrera Cabriolet-Manual 7-spd-6&quot;             
##  [37] &quot;911 Carrera Cabriolet-Automatic (AM-S7)-6&quot;        
##  [38] &quot;911 Carrera S-Manual 7-spd-6&quot;                     
##  [39] &quot;911 Carrera S-Automatic (AM-S7)-6&quot;                
##  [40] &quot;911 Carrera S Cabriolet-Automatic (AM-S7)-6&quot;      
##  [41] &quot;911 Carrera 4-Manual 7-spd-6&quot;                     
##  [42] &quot;911 Carrera 4 Cabriolet-Manual 7-spd-6&quot;           
##  [43] &quot;911 Carrera 4 Cabriolet-Automatic (AM-S7)-6&quot;      
##  [44] &quot;911 Carrera 4S-Manual 7-spd-6&quot;                    
##  [45] &quot;911 Carrera 4S-Automatic (AM-S7)-6&quot;               
##  [46] &quot;911 Targa 4-Manual 7-spd-6&quot;                       
##  [47] &quot;911 Targa 4-Automatic (AM-S7)-6&quot;                  
##  [48] &quot;911 Targa 4S-Manual 7-spd-6&quot;                      
##  [49] &quot;911 Targa 4S-Automatic (AM-S7)-6&quot;                 
##  [50] &quot;911 Carrera 4 GTS Cabriolet-Manual 7-spd-6&quot;       
##  [51] &quot;911 Carrera 4 GTS Cabriolet-Automatic (AM-S7)-6&quot;  
##  [52] &quot;911 Targa 4 GTS-Manual 7-spd-6&quot;                   
##  [53] &quot;911 Targa 4 GTS-Automatic (AM-S7)-6&quot;              
##  [54] &quot;911 Carrera T-Automatic (AM-S7)-6&quot;                
##  [55] &quot;911 Carrera-Manual 7-spd-6&quot;                       
##  [56] &quot;911 Carrera S Cabriolet-Manual 7-spd-6&quot;           
##  [57] &quot;911 Carrera 4-Automatic (AM-S7)-6&quot;                
##  [58] &quot;911 Carrera 4S Cabriolet-Manual 7-spd-6&quot;          
##  [59] &quot;911 Carrera 4S Cabriolet-Automatic (AM-S7)-6&quot;     
##  [60] &quot;911 Carrera GTS-Manual 7-spd-6&quot;                   
##  [61] &quot;911 Carrera GTS-Automatic (AM-S7)-6&quot;              
##  [62] &quot;911 Carrera GTS Cabriolet-Manual 7-spd-6&quot;         
##  [63] &quot;911 Carrera GTS Cabriolet-Automatic (AM-S7)-6&quot;    
##  [64] &quot;911 Carrera 4 GTS-Manual 7-spd-6&quot;                 
##  [65] &quot;911 Carrera 4 GTS-Automatic (AM-S7)-6&quot;            
##  [66] &quot;XE-Automatic (S8)-6&quot;                              
##  [67] &quot;XE AWD-Automatic (S8)-6&quot;                          
##  [68] &quot;XF-Automatic (S8)-6&quot;                              
##  [69] &quot;XF AWD-Automatic (S8)-6&quot;                          
##  [70] &quot;XJ-Automatic (S8)-6&quot;                              
##  [71] &quot;XJL-Automatic (S8)-6&quot;                             
##  [72] &quot;XF Sportbrake AWD-Automatic (S8)-6&quot;               
##  [73] &quot;Cascada-Automatic (S6)-4&quot;                         
##  [74] &quot;S60 AWD-Automatic (S8)-4&quot;                         
##  [75] &quot;V60 AWD-Automatic (S8)-4&quot;                         
##  [76] &quot;V90 AWD-Automatic (S8)-4&quot;                         
##  [77] &quot;V90 CC AWD-Automatic (S8)-4&quot;                      
##  [78] &quot;Mustang-Manual 6-spd-8&quot;                           
##  [79] &quot;Mustang Convertible-Automatic (S10)-8&quot;            
##  [80] &quot;Mustang-Automatic (S10)-8&quot;                        
##  [81] &quot;Mustang Bullitt-Manual 6-spd-8&quot;                   
##  [82] &quot;RLX-Automatic (S10)-6&quot;                            
##  [83] &quot;911 Turbo-Automatic (AM-S7)-6&quot;                    
##  [84] &quot;911 Turbo Cabriolet-Automatic (AM-S7)-6&quot;          
##  [85] &quot;911 Turbo S-Automatic (AM-S7)-6&quot;                  
##  [86] &quot;911 Turbo S Cabriolet-Automatic (AM-S7)-6&quot;        
##  [87] &quot;ATS AWD-Automatic (S8)-4&quot;                         
##  [88] &quot;ATS-Automatic (S8)-4&quot;                             
##  [89] &quot;CTS AWD-Automatic (S8)-4&quot;                         
##  [90] &quot;CTS-Automatic (S8)-4&quot;                             
##  [91] &quot;500 L-Automatic 6-spd-4&quot;                          
##  [92] &quot;230i Coupe-Manual 6-spd-4&quot;                        
##  [93] &quot;M240i Coupe M Performance-Automatic (S8)-6&quot;       
##  [94] &quot;M240i Coupe M Performance-Manual 6-spd-6&quot;         
##  [95] &quot;M240i xDrive Coupe M Performance-Automatic (S8)-6&quot;
##  [96] &quot;M240i Coupe-Automatic (S8)-6&quot;                     
##  [97] &quot;M240i Coupe-Manual 6-spd-6&quot;                       
##  [98] &quot;M240i xDrive Coupe-Automatic (S8)-6&quot;              
##  [99] &quot;M240i Convertible-Automatic (S8)-6&quot;               
## [100] &quot;M240i Convertible-Manual 6-spd-6&quot;                 
## [101] &quot;M240i xDrive Convertible-Automatic (S8)-6&quot;        
## [102] &quot;Camaro-Manual 6-spd-6&quot;                            
## [103] &quot;Camaro-Manual 6-spd-4&quot;                            
## [104] &quot;Camaro-Automatic (S8)-4&quot;                          
## [105] &quot;540i-Automatic (S8)-6&quot;                            
## [106] &quot;540i xDrive-Automatic (S8)-6&quot;                     
## [107] &quot;Stinger AWD-Automatic (S8)-4&quot;                     
## [108] &quot;Stinger RWD-Automatic (S8)-4&quot;                     
## [109] &quot;Stinger AWD-Automatic (S8)-6&quot;                     
## [110] &quot;Stinger RWD-Automatic (S8)-6&quot;                     
## [111] &quot;340i xDrive Gran Turismo-Automatic (S8)-6&quot;        
## [112] &quot;640i xDrive Gran Turismo-Automatic (S8)-6&quot;        
## [113] &quot;86-Manual 6-spd-4&quot;                                
## [114] &quot;BRZ-Manual 6-spd-4&quot;                               
## [115] &quot;Regal AWD-Automatic (S8)-4&quot;                       
## [116] &quot;Regal TourX AWD-Automatic (S8)-4&quot;                 
## [117] &quot;C300 Coupe-Automatic 9-spd-4&quot;                     
## [118] &quot;C300 4matic Coupe-Automatic 9-spd-4&quot;              
## [119] &quot;C300 Convertible-Automatic 9-spd-4&quot;               
## [120] &quot;E300-Automatic 9-spd-4&quot;                           
## [121] &quot;E300 4matic-Automatic 9-spd-4&quot;                    
## [122] &quot;AMG GLA45 4matic-Automatic (AM7)-4&quot;               
## [123] &quot;C300 4matic Convertible-Automatic 9-spd-4&quot;        
## [124] &quot;E450 Coupe-Automatic 9-spd-6&quot;                     
## [125] &quot;E450 4matic Coupe-Automatic 9-spd-6&quot;              
## [126] &quot;E450 Convertible-Automatic 9-spd-6&quot;               
## [127] &quot;E450 4matic Convertible-Automatic 9-spd-6&quot;        
## [128] &quot;Fusion AWD-Automatic (S6)-6&quot;                      
## [129] &quot;Q50-Automatic (S7)-6&quot;                             
## [130] &quot;Q50 AWD-Automatic (S7)-6&quot;                         
## [131] &quot;Q50 Red Sport-Automatic (S7)-6&quot;                   
## [132] &quot;Q50 Red Sport  AWD-Automatic (S7)-6&quot;              
## [133] &quot;MKZ AWD-Automatic (S6)-6&quot;                         
## [134] &quot;E450 4matic-Automatic 9-spd-6&quot;                    
## [135] &quot;S450-Automatic 9-spd-6&quot;                           
## [136] &quot;S450 4matic-Automatic 9-spd-6&quot;                    
## [137] &quot;E400 4matic (station wagon)-Automatic 9-spd-6&quot;    
## [138] &quot;Taurus AWD-Automatic (S6)-6&quot;                      
## [139] &quot;Taurus AWD FFV-Automatic (S6)-6&quot;                  
## [140] &quot;S560 4matic-Automatic 9-spd-8&quot;                    
## [141] &quot;K900-Automatic (S8)-6&quot;                            
## [142] &quot;V60 CC AWD-Automatic (S8)-4&quot;                      
## [143] &quot;IS 300 AWD-Automatic (S6)-6&quot;                      
## [144] &quot;IS 350-Automatic (S8)-6&quot;                          
## [145] &quot;IS 350 AWD-Automatic (S6)-6&quot;                      
## [146] &quot;IS 300-Automatic (S8)-4&quot;                          
## [147] &quot;GS 350-Automatic (S8)-6&quot;                          
## [148] &quot;GS 350 AWD-Automatic (S6)-6&quot;                      
## [149] &quot;GS 350 F Sport-Automatic (S8)-6&quot;                  
## [150] &quot;GS 300 F Sport-Automatic (S8)-4&quot;                  
## [151] &quot;LS 500-Automatic (S10)-6&quot;                         
## [152] &quot;LS 500 AWD-Automatic (S10)-6&quot;                     
## [153] &quot;Continental  AWD-Automatic (S6)-6&quot;                
## [154] &quot;S560-Automatic 9-spd-8&quot;                           
## [155] &quot;RC 300 AWD-Automatic (S6)-6&quot;                      
## [156] &quot;RC 350-Automatic (S8)-6&quot;                          
## [157] &quot;RC 350 AWD-Automatic (S6)-6&quot;                      
## [158] &quot;RC 300-Automatic (S8)-4&quot;                          
## [159] &quot;AMG E53 4matic Plus Coupe-Automatic 9-spd-6&quot;      
## [160] &quot;AMG CLS53 4matic Plus-Automatic 9-spd-6&quot;          
## [161] &quot;AMG E53 4matic Plus-Automatic 9-spd-6&quot;            
## [162] &quot;A8 L-Automatic (S8)-6&quot;                            
## [163] &quot;S5-Automatic (S8)-6&quot;                              
## [164] &quot;S5 Cabriolet-Automatic (S8)-6&quot;                    
## [165] &quot;RS 5-Automatic (S8)-6&quot;                            
## [166] &quot;S3-Automatic (AM-S7)-4&quot;                           
## [167] &quot;Q60-Automatic (S7)-6&quot;                             
## [168] &quot;Q60 Red Sport-Automatic (S7)-6&quot;                   
## [169] &quot;Q60-Automatic (S7)-4&quot;                             
## [170] &quot;Q60 AWD-Automatic (S7)-4&quot;                         
## [171] &quot;Q60 Red Sport AWD-Automatic (S7)-6&quot;               
## [172] &quot;Q60 AWD-Automatic (S7)-6&quot;                         
## [173] &quot;AMG E53 4matic Plus Convertible-Automatic 9-spd-6&quot;
## [174] &quot;S4-Automatic (S8)-6&quot;                              
## [175] &quot;S5 Sportback-Automatic (S8)-6&quot;                    
## [176] &quot;A7 quattro-Automatic (AM-S7)-6&quot;                   
## [177] &quot;A6 quattro-Automatic (AM-S7)-6&quot;                   
## [178] &quot;Q50-Automatic (S7)-4&quot;                             
## [179] &quot;Q50 AWD-Automatic (S7)-4&quot;                         
## 
## [[3]]
##  [1] &quot;G70 AWD-Automatic (S8)-6&quot;                      
##  [2] &quot;650i xDrive Gran Coupe-Automatic (S8)-8&quot;       
##  [3] &quot;Alpina B6 xDrive Gran Coupe-Automatic (S8)-8&quot;  
##  [4] &quot;M6 Gran Coupe-Manual 6-spd-8&quot;                  
##  [5] &quot;Q70-Automatic (S7)-8&quot;                          
##  [6] &quot;Q70 AWD-Automatic (S7)-8&quot;                      
##  [7] &quot;Q70 AWD-Automatic (S7)-6&quot;                      
##  [8] &quot;750i xDrive-Automatic (S8)-8&quot;                  
##  [9] &quot;Alpina B7 xDrive-Automatic (S8)-8&quot;             
## [10] &quot;G90 AWD-Automatic (S8)-6&quot;                      
## [11] &quot;G90 RWD-Automatic (S8)-6&quot;                      
## [12] &quot;G90 AWD-Automatic (S8)-8&quot;                      
## [13] &quot;G90 RWD-Automatic (S8)-8&quot;                      
## [14] &quot;G80 AWD-Automatic (S8)-6&quot;                      
## [15] &quot;G80 RWD-Automatic (S8)-6&quot;                      
## [16] &quot;G80 AWD-Automatic (S8)-8&quot;                      
## [17] &quot;G80 RWD-Automatic (S8)-8&quot;                      
## [18] &quot;GTC4Lusso T-Automatic (AM7)-8&quot;                 
## [19] &quot;Portofino-Automatic (AM7)-8&quot;                   
## [20] &quot;911 Carrera T-Manual 7-spd-6&quot;                  
## [21] &quot;DB11 V12-Automatic (S8)-12&quot;                    
## [22] &quot;DB11 V8-Automatic (S8)-8&quot;                      
## [23] &quot;RC F-Automatic (S8)-8&quot;                         
## [24] &quot;XTS AWD-Automatic (S6)-6&quot;                      
## [25] &quot;XJ AWD-Automatic (S8)-6&quot;                       
## [26] &quot;XJL AWD-Automatic (S8)-6&quot;                      
## [27] &quot;ATS-V-Manual 6-spd-6&quot;                          
## [28] &quot;ATS-V-Automatic (S8)-6&quot;                        
## [29] &quot;GS F-Automatic (S8)-8&quot;                         
## [30] &quot;CTS-Automatic (S8)-6&quot;                          
## [31] &quot;XJ-Automatic (S8)-8&quot;                           
## [32] &quot;XJL-Automatic (S8)-8&quot;                          
## [33] &quot;M2 Competition-Manual 6-spd-6&quot;                 
## [34] &quot;M2 Competition-Automatic (AM-S7)-6&quot;            
## [35] &quot;M4 Convertible-Manual 6-spd-6&quot;                 
## [36] &quot;M4 Convertible-Automatic (AM-S7)-6&quot;            
## [37] &quot;M4 Convertible Competition-Manual 6-spd-6&quot;     
## [38] &quot;M4 Convertible Competition-Automatic (AM-S7)-6&quot;
## [39] &quot;Camaro-Manual 6-spd-8&quot;                         
## [40] &quot;M4 Coupe-Manual 6-spd-6&quot;                       
## [41] &quot;M4 Coupe-Automatic (AM-S7)-6&quot;                  
## [42] &quot;M4 CS-Automatic (AM-S7)-6&quot;                     
## [43] &quot;M4 Coupe Competition-Manual 6-spd-6&quot;           
## [44] &quot;M4 Coupe Competition-Automatic (AM-S7)-6&quot;      
## [45] &quot;M550i xDrive-Automatic (S8)-8&quot;                 
## [46] &quot;M5-Automatic (S8)-8&quot;                           
## [47] &quot;M5 Competition-Automatic (S8)-8&quot;               
## [48] &quot;Ghibli  V6 RWD-Automatic 8-spd-6&quot;              
## [49] &quot;Quattroporte SQ4 V6-Automatic 8-spd-6&quot;         
## [50] &quot;Ghibli V6 SQ4 AWD-Automatic 8-spd-6&quot;           
## [51] &quot;Ghibli  S RWD-Automatic 8-spd-6&quot;               
## [52] &quot;Quattroporte V8-Automatic 8-spd-8&quot;             
## [53] &quot;Quattroporte S-Automatic 8-spd-6&quot;              
## [54] &quot;XE AWD-Automatic (S8)-8&quot;                       
## [55] &quot;Challenger-Automatic 8-spd-8&quot;                  
## [56] &quot;Challenger-Manual 6-spd-8&quot;                     
## [57] &quot;300-Automatic 8-spd-8&quot;                         
## [58] &quot;Charger-Automatic 8-spd-8&quot;                     
## [59] &quot;Giulia-Automatic 8-spd-6&quot;                      
## [60] &quot;S560 Convertible-Automatic 9-spd-8&quot;            
## [61] &quot;AMG S63 4matic Convertible-Automatic 9-spd-8&quot;  
## [62] &quot;AMG S63 4matic Coupe-Automatic 9-spd-8&quot;        
## [63] &quot;AMG S63 4matic-Automatic 9-spd-8&quot;              
## [64] &quot;Maybach S560 4matic-Automatic 9-spd-8&quot;         
## [65] &quot;LC 500-Automatic (S10)-8&quot;                      
## [66] &quot;DBS-Automatic (S8)-12&quot;                         
## [67] &quot;S560 4matic Coupe-Automatic 9-spd-8&quot;           
## [68] &quot;RS 5 Sportback-Automatic (S8)-6&quot;               
## 
## [[4]]
##  [1] &quot;M6 Gran Coupe-Automatic (AM-S7)-8&quot;        
##  [2] &quot;M760i xDrive-Automatic (S8)-12&quot;           
##  [3] &quot;GTC4Lusso-Automatic (AM7)-12&quot;             
##  [4] &quot;CTS-V-Automatic (S8)-8&quot;                   
##  [5] &quot;Camaro-Automatic (S10)-8&quot;                 
##  [6] &quot;Dawn-Automatic (S8)-12&quot;                   
##  [7] &quot;Wraith-Automatic (S8)-12&quot;                 
##  [8] &quot;Ghost-Automatic (S8)-12&quot;                  
##  [9] &quot;Ghost EWB-Automatic (S8)-12&quot;              
## [10] &quot;Challenger SRT-Automatic 8-spd-8&quot;         
## [11] &quot;Challenger SRT-Manual 6-spd-8&quot;            
## [12] &quot;Charger SRT-Automatic 8-spd-8&quot;            
## [13] &quot;Phantom-Automatic (S8)-12&quot;                
## [14] &quot;Phantom EWB-Automatic (S8)-12&quot;            
## [15] &quot;Cullinan-Automatic (S8)-12&quot;               
## [16] &quot;GranTurismo Convertible-Automatic 6-spd-8&quot;
## [17] &quot;Mulsanne-Automatic (S8)-8&quot;                
## [18] &quot;Stage 3 Mustang-Manual 6-spd-8&quot;           
## 
## [[5]]
##   [1] &quot;Jetta-Automatic (S8)-4&quot;                                   
##   [2] &quot;Jetta-Manual 6-spd-4&quot;                                     
##   [3] &quot;Veloster-Automatic (S6)-4&quot;                                
##   [4] &quot;Veloster-Manual 6-spd-4&quot;                                  
##   [5] &quot;Veloster-Automatic (AM7)-4&quot;                               
##   [6] &quot;CX-3 2WD-Automatic (S6)-4&quot;                                
##   [7] &quot;CX-3 4WD-Automatic (S6)-4&quot;                                
##   [8] &quot;Fit-Automatic (variable gear ratios)-4&quot;                   
##   [9] &quot;Fit-Automatic (AV-S7)-4&quot;                                  
##  [10] &quot;Fit-Manual 6-spd-4&quot;                                       
##  [11] &quot;Avalon Hybrid-Automatic (AV-S6)-4&quot;                        
##  [12] &quot;Avalon Hybrid XLE-Automatic (AV-S6)-4&quot;                    
##  [13] &quot;C-HR-Automatic (AV-S7)-4&quot;                                 
##  [14] &quot;Impreza 4-Door-Manual 5-spd-4&quot;                            
##  [15] &quot;Impreza 4-Door-Automatic (AV-S7)-4&quot;                       
##  [16] &quot;Impreza Sport 4-Door-Automatic (AV-S7)-4&quot;                 
##  [17] &quot;Soul-Automatic (AM7)-4&quot;                                   
##  [18] &quot;Soul-Automatic (S6)-4&quot;                                    
##  [19] &quot;Impreza 5-Door-Automatic (AV-S7)-4&quot;                       
##  [20] &quot;Impreza Sport 5-Door-Automatic (AV-S7)-4&quot;                 
##  [21] &quot;Spark-Automatic (variable gear ratios)-4&quot;                 
##  [22] &quot;Spark-Manual 5-spd-4&quot;                                     
##  [23] &quot;LaCrosse eAssist-Automatic (S6)-4&quot;                        
##  [24] &quot;Corolla-Automatic (variable gear ratios)-4&quot;               
##  [25] &quot;Corolla-Automatic (AV-S7)-4&quot;                              
##  [26] &quot;Corolla-Manual 6-spd-4&quot;                                   
##  [27] &quot;Corolla LE Eco-Automatic (variable gear ratios)-4&quot;        
##  [28] &quot;Soul-Manual 6-spd-4&quot;                                      
##  [29] &quot;Accent-Automatic (S6)-4&quot;                                  
##  [30] &quot;Accent-Manual 6-spd-4&quot;                                    
##  [31] &quot;Corolla Hatchback-Manual 6-spd-4&quot;                         
##  [32] &quot;Corolla Hatchback-Automatic (AV-S10)-4&quot;                   
##  [33] &quot;Corolla Hatchback XSE-Automatic (AV-S10)-4&quot;               
##  [34] &quot;Optima-Automatic (AM7)-4&quot;                                 
##  [35] &quot;Optima FE-Automatic (S6)-4&quot;                               
##  [36] &quot;Spark ACTIV-Automatic (variable gear ratios)-4&quot;           
##  [37] &quot;Spark ACTIV-Manual 5-spd-4&quot;                               
##  [38] &quot;Insight-Automatic (variable gear ratios)-4&quot;               
##  [39] &quot;Insight Touring-Automatic (variable gear ratios)-4&quot;       
##  [40] &quot;Elantra SE-Automatic (S6)-4&quot;                              
##  [41] &quot;Elantra-Automatic (S6)-4&quot;                                 
##  [42] &quot;Elantra-Manual 6-spd-4&quot;                                   
##  [43] &quot;Legacy AWD-Automatic (AV-S7)-4&quot;                           
##  [44] &quot;HR-V FWD-Automatic (variable gear ratios)-4&quot;              
##  [45] &quot;HR-V FWD-Automatic (AV-S7)-4&quot;                             
##  [46] &quot;HR-V AWD-Automatic (variable gear ratios)-4&quot;              
##  [47] &quot;HR-V AWD-Automatic (AV-S7)-4&quot;                             
##  [48] &quot;Beetle Convertible-Automatic (S6)-4&quot;                      
##  [49] &quot;Cruze-Automatic (variable gear ratios)-4&quot;                 
##  [50] &quot;Cruze-Automatic (S6)-4&quot;                                   
##  [51] &quot;Beetle-Automatic (S6)-4&quot;                                  
##  [52] &quot;Cruze Hatchback-Automatic (S6)-4&quot;                         
##  [53] &quot;Forte FE-Automatic (variable gear ratios)-4&quot;              
##  [54] &quot;Forte-Automatic (variable gear ratios)-4&quot;                 
##  [55] &quot;Forte-Manual 6-spd-4&quot;                                     
##  [56] &quot;Passat-Automatic (S6)-4&quot;                                  
##  [57] &quot;Sonata-Automatic (S6)-4&quot;                                  
##  [58] &quot;Sonata SE-Automatic (S6)-4&quot;                               
##  [59] &quot;Sonata-Automatic (AM7)-4&quot;                                 
##  [60] &quot;Ioniq-Automatic (AM6)-4&quot;                                  
##  [61] &quot;Ioniq Blue-Automatic (AM6)-4&quot;                             
##  [62] &quot;Sentra-Manual 6-spd-4&quot;                                    
##  [63] &quot;Sentra-Automatic (variable gear ratios)-4&quot;                
##  [64] &quot;Cruze Premier Hatchback-Automatic (S6)-4&quot;                 
##  [65] &quot;Prius c-Automatic (variable gear ratios)-4&quot;               
##  [66] &quot;Camry LE/SE-Automatic (S8)-4&quot;                             
##  [67] &quot;Camry XLE/XSE-Automatic (S8)-4&quot;                           
##  [68] &quot;Camry-Automatic (S8)-4&quot;                                   
##  [69] &quot;Cruze Premier-Automatic (S6)-4&quot;                           
##  [70] &quot;Versa-Automatic (variable gear ratios)-4&quot;                 
##  [71] &quot;Versa-Manual 5-spd-4&quot;                                     
##  [72] &quot;Sonic-Automatic (S6)-4&quot;                                   
##  [73] &quot;Sonic-Manual 6-spd-4&quot;                                     
##  [74] &quot;Rio-Automatic (S6)-4&quot;                                     
##  [75] &quot;Rio-Manual 6-spd-4&quot;                                       
##  [76] &quot;Yaris-Manual 6-spd-4&quot;                                     
##  [77] &quot;Yaris-Automatic (S6)-4&quot;                                   
##  [78] &quot;Fusion FWD-Automatic (S6)-4&quot;                              
##  [79] &quot;Fusion Hybrid FWD-Automatic (variable gear ratios)-4&quot;     
##  [80] &quot;Fusion Hybrid Taxi-Automatic (variable gear ratios)-4&quot;    
##  [81] &quot;Elantra-Automatic (AM7)-4&quot;                                
##  [82] &quot;ES 300h-Automatic (AV-S6)-4&quot;                              
##  [83] &quot;MKZ Hybrid FWD-Automatic (variable gear ratios)-4&quot;        
##  [84] &quot;Camry Hybrid LE-Automatic (AV-S6)-4&quot;                      
##  [85] &quot;Camry Hybrid XLE/SE-Automatic (AV-S6)-4&quot;                  
##  [86] &quot;Sonic 5-Automatic (S6)-4&quot;                                 
##  [87] &quot;Sonic 5-Manual 6-spd-4&quot;                                   
##  [88] &quot;Malibu-Automatic (variable gear ratios)-4&quot;                
##  [89] &quot;Optima Hybrid-Automatic (AM6)-4&quot;                          
##  [90] &quot;Niro-Automatic (AM6)-4&quot;                                   
##  [91] &quot;Niro Touring-Automatic (AM6)-4&quot;                           
##  [92] &quot;Niro FE-Automatic (AM6)-4&quot;                                
##  [93] &quot;Fiesta FWD-Automatic (AM-S6)-4&quot;                           
##  [94] &quot;Fiesta FWD-Manual 5-spd-4&quot;                                
##  [95] &quot;Fiesta ST FWD-Manual 6-spd-4&quot;                             
##  [96] &quot;Civic 2Dr-Automatic (AV-S7)-4&quot;                            
##  [97] &quot;Civic 2Dr-Automatic (variable gear ratios)-4&quot;             
##  [98] &quot;Malibu Hybrid-Automatic (variable gear ratios)-4&quot;         
##  [99] &quot;Civic 4Dr-Automatic (AV-S7)-4&quot;                            
## [100] &quot;Civic 4Dr-Automatic (variable gear ratios)-4&quot;             
## [101] &quot;Altima-Automatic (variable gear ratios)-4&quot;                
## [102] &quot;Altima SR/Platinum-Automatic (variable gear ratios)-4&quot;    
## [103] &quot;Altima AWD-Automatic (variable gear ratios)-4&quot;            
## [104] &quot;Altima AWD SR/Platinum-Automatic (variable gear ratios)-4&quot;
## [105] &quot;Accord-Manual 6-spd-4&quot;                                    
## [106] &quot;Accord-Automatic (variable gear ratios)-4&quot;                
## [107] &quot;Accord-Automatic (AV-S7)-4&quot;                               
## [108] &quot;Accord-Automatic 10-spd-4&quot;                                
## [109] &quot;Elantra GT-Automatic (S6)-4&quot;                              
## [110] &quot;Elantra GT-Automatic (AM7)-4&quot;                             
## [111] &quot;Mirage-Manual 5-spd-3&quot;                                    
## [112] &quot;Mirage-Automatic (variable gear ratios)-3&quot;                
## [113] &quot;Mirage G4-Manual 5-spd-3&quot;                                 
## [114] &quot;Mirage G4-Automatic (variable gear ratios)-3&quot;             
## [115] &quot;Golf-Automatic (S8)-4&quot;                                    
## [116] &quot;Golf-Manual 6-spd-4&quot;                                      
## [117] &quot;GTI-Manual 6-spd-4&quot;                                       
## [118] &quot;Golf SportWagen-Automatic (S8)-4&quot;                         
## [119] &quot;Golf SportWagen-Manual 6-spd-4&quot;</code></pre>
<p>Just as a visual confirmation, let’s see what the ranges of the MPG is for these groups.</p>
<p>It’s quite clear that cluster 5 are the highest MPG vehicles, cluster 4 are the low MPG vehicles and include the Rolls Royce models.
Kmeans is one of easiest clustering algorithm and there are many other unsupervised learning algorithms that will perform clustering. More on those in future posts.</p>
<pre class="r"><code>ggplot(data, aes(x=k$cluster, y = comb08)) +
  geom_boxplot(aes(group = k$cluster, fill = as.factor(k$cluster)), show.legend = FALSE) +
  scale_fill_brewer(palette = &quot;Set1&quot;) +
  labs(title = &quot;Clusters and Avg MPG&quot;, x = &quot;Cluster&quot;, y = &quot;MPG&quot;) </code></pre>
<p><img src="/post/2018-11-21-vehicle-fuel-economy_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
</div>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>In conclusion, we can say that the automotive world is undergoing a sea change and these are exciting times, it remains to be seen which fuel types dominate in the coming years; it’s clear that Gasoline as a fuel has had a great run and is by no means done.</p>
</div>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="//tags/machine-learning/">machine learning</a>

  <a class="tag tag--primary tag--small" href="//tags/eda/">EDA</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--disabled">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2017/nps-exploratory-text-analysis/" data-tooltip="NPS - Exploratory analysis in R - Text analysis">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Nitin Ahuja. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--disabled">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2017/nps-exploratory-text-analysis/" data-tooltip="NPS - Exploratory analysis in R - Text analysis">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
        <i class="fa fa-google-plus"></i><span>Share on Google Plus</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
        <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2f2018%2fvehicle-fuel-economy-exploratory-analysis%2f">
        <i class="fa fa-twitter"></i><span>Share on Twitter</span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/2a9756e94950a1dabeb63034558f787d?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Nitin Ahuja</h4>
    
      <div id="about-card-bio">A programmer&rsquo;s viewpoint</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Forever learning
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        California
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/vehicle-fuel-economy-exploratory-analysis/">
                <h3 class="media-heading">Vehicle Fuel Economy - exploratory analysis</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Introduction In this post, we are going to look at some publicly available data to dig deeper into exploratory data analysis and machine learning techniques. I am going to start by fetching some data from the inter webs, this data is available at the FuelEconomy.gov site. This file has fuel economy data for all cars sold in the United States for several years.
Let’s start by loading the libraries we need:</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/nps-exploratory-text-analysis/">
                <h3 class="media-heading">NPS - Exploratory analysis in R - Text analysis</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">NPS analysis NPS - Comment analysis In an previous post we performed some EDA on the NPS data we have. Recall that as part of the question about the likelihood of recommending a service or business there is an optional text response about why they picked this score.
Let’s try and see what those responses are all about. We had already performed some sentiment analysis on this text we are now going to attempt to classify this text into topics.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/heatmaps-in-r/">
                <h3 class="media-heading">Heat maps in R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Heatmaps Heat maps are invaluable in displaying a large amount of continuous data contained in a 2d matrix. This post is meant to show a way to create a print worthy heat map in R.
Let’s start by loading the required packages.
suppressPackageStartupMessages({ library(ggplot2) library(ggthemes) library(viridis) library(scales) library(tidyr) }) Data Our data is from a business that receives sales calls 24x7. Let’s read and see what the data looks like.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/managing-managers-some-thoughts/">
                <h3 class="media-heading">Managing managers - some thoughts</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">When you are managing managers, you should have a single focus; they are learning to manage their teams well and as a secondary objective that they are contributing at high levels. There are several experts in this area and I do not claim to be anywhere close; these are just reminders for myself.
Your team learns by modeling you. There is little doubt that what you do, your team will emulate.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/nps-exploratory-analysis-in-r/">
                <h3 class="media-heading">NPS - Exploratory analysis in R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">NPS analysis What is net promorter score (NPS)? Net Promoter Score or NPS is a customer loyalty metric and was developed by Fred Reichheld and it asks respondents to answer a single question. &gt; How likely are you to recommend this product? The respondents are asked to score between 0 and 10. 10 being “most likely” to recommend and 0 being “least likely”.
An additional optional question is asked about why they picked this score and the response to that is usually a text comment.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2016/forecasting-in-r-philadelphia-crime-data/">
                <h3 class="media-heading">Forecasting in R - Philadelphia crime data</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Exploring crime in Philadelphia This is a large and intersting dataset and has data points stretching back over 10 years. Several explorations have pointed out that crime seems to be seasonal and I wanted to explore this with a time series. Assuming that seasonal trends might repeat themselves, I am exploring this using the forecast package and using linear regression to predict trends.
suppressPackageStartupMessages({ library(data.table) library(forecast) library(knitr) }) Data size and structure.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2016/access-log-parsing-with-spark-and-schema-extraction-from-query-string/">
                <h3 class="media-heading">Access log parsing with Spark and schema extraction from query string</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I needed to parse server logs and create Spark DataFrames to query information from the query string parameters. My naive version kept throwing errors about mismatched number of fields in schema and those in the row being queried.
It turns out I was dealing with over 350 different query string params across the logs. This could change over time and there was no way I was going to add these programmatically by hand.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2016/revenue-forecast-for-seasonal-business/">
                <h3 class="media-heading">Revenue forecast for seasonal business</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Revenue forecasting with linear methods. This post highlights linear regression techniques on time series data. We have some weekly sales data from a small business that is expected to have seasonal trends. A bike rental business in a major tourist city. Let’s dive into the data. Load up the required packages.
suppressPackageStartupMessages({ library(forecast) }) Load the data, we have two columns with weekly revenue numbers from two different sources. Online and Phone; these correspond to sales online and via phone call to the business.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2014/on-marketplaces-and-platforms/">
                <h3 class="media-heading">On Marketplaces and platforms</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2014
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Marketplaces are all the rage these days, in truth, marketplaces have been around since ancient times. A marketplace usually exists to connect sellers of goods or services with buyers. The marketplace itself usually benefits by selling space to sellers or by taking a cut of the transaction.
This post is focused on service marketplaces that are connecting and democratizing human capital in a way that has never been possible. Things like vetting, payments, reviews and support have been researched and A/B tested to an art.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2013/finding-with-find/">
                <h3 class="media-heading">Finding with find</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2013
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Find is a really versatile utility that can be used to enumerate files of different types, narrow the list by file types, dates, sizes, access times and a whole list of expressions. The output can be formatted with various switches to be csv.
My goal was to list the sizes and access times for all video files in the system. I knew that there was over 3 TB of files but not how recently these were accessed/played.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         14 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('/images/cover.jpg');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2018\/vehicle-fuel-economy-exploratory-analysis\/';
          
            this.page.identifier = '\/2018\/vehicle-fuel-economy-exploratory-analysis\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'viewstate-1';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

